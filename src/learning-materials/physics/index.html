
<nav class="hidden md:flex items-center space-x-1">
<a href="/src/learning-materials/physics/1.measurement-and-units/a.length-area-volume/index.html" class="nav-btn px-4 py-2 text-primary font-medium button-text rounded-lg bg-primary/10">Length, area, and volume</a>
<a href="practice.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Practice</a>
<a href="TedX.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Mock Exams</a>
<a href="/analytics/analytics.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Analytics</a>
<a href="achievements.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Achievements</a>
<a href="subjects.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Study</a>
<a href="/src/library/index.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Library</a>
</nav>

<nav class="hidden md:flex items-center space-x-1">
<a href="/src/learning-materials/physics/1.measurement-and-units/a.length-area-volume/index.html">a. Length, area and volume</a>
<a href="/src/learning-materials/physics/1.measurement-and-units/b.mass/index.html">b. Mass</a>
<a href="/src/learning-materials/physics/1.measurement-and-units/c.time/index.html">c.Time</a>
</nav>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepSeek AI Chatbot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen">
    <div class="container mx-auto px-4 py-6 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-primary mb-2">DeepSeek AI Chatbot</h1>
            <p class="text-gray-600 dark:text-gray-400">Chat with DeepSeek AI using your API key</p>
        </div>



        <!-- Chat Interface -->
        <div id="chatInterface">
            <!-- Chat Messages -->
            <div id="chatMessages" class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 h-96 overflow-y-auto">
                <div class="text-center text-gray-500 dark:text-gray-400 py-8">
                    Start a conversation with DeepSeek AI!
                </div>
            </div>

            <!-- Message Input -->
            <div class="flex gap-3">
                <input 
                    type="text" 
                    id="messageInput" 
                    placeholder="Type your message..." 
                    class="flex-1 px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent outline-none"
                >
                <button 
                    id="sendMessage" 
                    class="px-6 py-3 bg-primary text-white rounded-lg hover:bg-purple-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed"
                >
                    Send
                </button>
            </div>

            <!-- Clear Chat Button -->
            <div class="mt-4 text-center">
                <button 
                    id="clearChat" 
                    class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"
                >
                    Clear Chat
                </button>
            </div>
        </div>
    </div>

    <!-- Custom Modal -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
            <p id="modalText" class="text-gray-700 dark:text-gray-300 mb-4"></p>
            <div class="flex justify-end">
                <button 
                    id="modalOk" 
                    class="px-4 py-2 bg-primary text-white hover:bg-purple-700 rounded-lg"
                >
                    OK
                </button>
            </div>
        </div>
    </div>

    <script>
        // Dark mode setup
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Custom modal function
        function showModal(message) {
            const modal = document.getElementById('modal');
            const modalText = document.getElementById('modalText');
            modalText.textContent = message;
            modal.classList.remove('hidden');
        }

        // API Key - Replace with your actual DeepSeek API key
        const apiKey = 'YOUR_DEEPSEEK_API_KEY_HERE';

        // DOM elements
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendMessageBtn = document.getElementById('sendMessage');
        const clearChatBtn = document.getElementById('clearChat');
        const modalOkBtn = document.getElementById('modalOk');

        let conversationHistory = [];

        // Modal close handler
        modalOkBtn.addEventListener('click', () => {
            document.getElementById('modal').classList.add('hidden');
        });

        // Send Message
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // Add user message to chat
            addMessageToChat('user', message);
            messageInput.value = '';
            sendMessageBtn.disabled = true;

            // Add loading message
            const loadingId = addMessageToChat('assistant', 'Thinking...');

            try {
                const response = await fetch('https://api.deepseek.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'deepseek-chat',
                        messages: [
                            ...conversationHistory,
                            { role: 'user', content: message }
                        ],
                        temperature: 0.7,
                        max_tokens: 2000
                    })
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status} ${response.statusText}`);
                }

                const data = await response.json();
                const aiResponse = data.choices[0].message.content;

                // Update conversation history
                conversationHistory.push(
                    { role: 'user', content: message },
                    { role: 'assistant', content: aiResponse }
                );

                // Replace loading message with actual response
                updateMessageInChat(loadingId, aiResponse);

            } catch (error) {
                console.error('Error:', error);
                updateMessageInChat(loadingId, `Error: ${error.message}`);
                showModal(`Failed to send message: ${error.message}`);
            }

            sendMessageBtn.disabled = false;
        }

        // Add message to chat
        function addMessageToChat(role, content) {
            const messageId = Date.now();
            const messageDiv = document.createElement('div');
            messageDiv.id = `message-${messageId}`;
            messageDiv.className = `mb-4 ${role === 'user' ? 'text-right' : 'text-left'}`;
            
            const bubbleClass = role === 'user' 
                ? 'bg-primary text-white ml-12' 
                : 'bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 mr-12';
            
            messageDiv.innerHTML = `
                <div class="inline-block p-3 rounded-lg ${bubbleClass} max-w-full">
                    <div class="text-xs opacity-70 mb-1">${role === 'user' ? 'You' : 'DeepSeek AI'}</div>
                    <div class="whitespace-pre-wrap">${content}</div>
                </div>
            `;

            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Clear empty state
            const emptyState = chatMessages.querySelector('.text-center.text-gray-500');
            if (emptyState) {
                emptyState.remove();
            }

            return messageId;
        }

        // Update message in chat
        function updateMessageInChat(messageId, newContent) {
            const messageDiv = document.getElementById(`message-${messageId}`);
            if (messageDiv) {
                const contentDiv = messageDiv.querySelector('.whitespace-pre-wrap');
                contentDiv.textContent = newContent;
            }
        }

        // Event listeners
        sendMessageBtn.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Clear chat
        clearChatBtn.addEventListener('click', () => {
            conversationHistory = [];
            chatMessages.innerHTML = '<div class="text-center text-gray-500 dark:text-gray-400 py-8">Start a conversation with DeepSeek AI!</div>';
        });
    </script>
</body>
</html>
