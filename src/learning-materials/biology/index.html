<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biology Study Portal - K-12</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        // Professional Brand Colors
                        primary: {
                            DEFAULT: "#0F2C59", // Deep Navy - Trust, Authority, Stability
                            50: "#f0f3f8",
                            100: "#d6e1ee",
                            500: "#0F2C59",
                            600: "#0a2549",
                            700: "#081e39",
                        },
                        accent: {
                            DEFAULT: "#009F9D", // Consultancy Teal - Innovation, Precision
                            50: "#e6f7f7",
                            100: "#b3ebea",
                            500: "#009F9D",
                            600: "#008280",
                            700: "#006663",
                        },
                        neutral: {
                            25: "#FEFEFE",
                            50: "#F8F9FA", // Warm Light Gray - Cleanliness, Clarity
                            100: "#F1F3F4",
                            200: "#E8EAED",
                            300: "#DADCE0",
                            400: "#BDC1C6",
                            500: "#9AA0A6",
                            600: "#80868B",
                            700: "#5F6368",
                            800: "#2D3748", // Charcoal - Sophistication, Legibility
                            900: "#1F2937",
                        },
                        premium: {
                            DEFAULT: "#D2C1A7", // Pale Sand - Warmth, Approachability
                            50: "#fbf9f6",
                            100: "#f4efe6",
                            500: "#D2C1A7",
                            600: "#c4b095",
                            700: "#b69f83",
                        },
                        data: {
                            DEFAULT: "#5A7B9E", // Steel Blue - Logic, Intelligence
                            50: "#f2f5f9",
                            100: "#e1e9f2",
                            500: "#5A7B9E",
                            600: "#4d6a87",
                            700: "#405970",
                        },
                        biology: {
                            DEFAULT: "#22c55e", // Nature Green - Life, Growth
                            50: "#f0fdf4",
                            100: "#dcfce7",
                            500: "#22c55e",
                            600: "#16a34a",
                            700: "#15803d",
                        },
                        success: "#22c55e",
                        warning: "#f59e0b",
                        error: "#ef4444",
                    },
                    boxShadow: {
                        'material-1': '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)',
                        'material-2': '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)',
                        'material-3': '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)',
                        'material-4': '0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)',
                        'material-5': '0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)',
                    },
                    fontFamily: {
                        'sans': ['Roboto', 'system-ui', 'sans-serif'],
                    },
                    borderRadius: {
                        'material': '4px',
                    }
                }
            }
        }
    </script>
    
    <style>
        .fade-in {
            animation: fadeIn 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(16px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .material-card {
            transition: box-shadow 0.28s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .material-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .material-button {
            transition: all 0.15s cubic-bezier(0.4, 0.0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .material-button:active {
            transform: scale(0.98);
        }

        .biology-card {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.05) 0%, rgba(0, 159, 157, 0.05) 100%);
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .interactive-element {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .interactive-element:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .search-highlight {
            background-color: #fef08a;
            color: #92400e;
        }

        .dark .search-highlight {
            background-color: #713f12;
            color: #fef08a;
        }

        /* Material Design Typography Scale */
        .headline-1 { font-size: 6rem; font-weight: 300; line-height: 1.167; letter-spacing: -1.5px; }
        .headline-2 { font-size: 3.75rem; font-weight: 300; line-height: 1.2; letter-spacing: -0.5px; }
        .headline-3 { font-size: 3rem; font-weight: 400; line-height: 1.167; letter-spacing: 0; }
        .headline-4 { font-size: 2.125rem; font-weight: 400; line-height: 1.235; letter-spacing: 0.25px; }
        .headline-5 { font-size: 1.5rem; font-weight: 400; line-height: 1.334; letter-spacing: 0; }
        .headline-6 { font-size: 1.25rem; font-weight: 500; line-height: 1.6; letter-spacing: 0.15px; }
        .subtitle-1 { font-size: 1rem; font-weight: 400; line-height: 1.75; letter-spacing: 0.15px; }
        .subtitle-2 { font-size: 0.875rem; font-weight: 500; line-height: 1.57; letter-spacing: 0.1px; }
        .body-1 { font-size: 1rem; font-weight: 400; line-height: 1.5; letter-spacing: 0.5px; }
        .body-2 { font-size: 0.875rem; font-weight: 400; line-height: 1.43; letter-spacing: 0.25px; }
        .button-text { font-size: 0.875rem; font-weight: 500; line-height: 1.75; letter-spacing: 1.25px; text-transform: uppercase; }
        .caption { font-size: 0.75rem; font-weight: 400; line-height: 1.66; letter-spacing: 0.4px; }
        .overline { font-size: 0.75rem; font-weight: 400; line-height: 2.66; letter-spacing: 1px; text-transform: uppercase; }

        /* Dark mode enhancements */
        .dark .material-card {
            background-color: #1F2937;
            border-color: #374151;
        }

        .dark .material-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
    </style>
</head>

<body class="bg-neutral-50 dark:bg-neutral-900 font-sans transition-colors duration-200">
    <!-- Material Design App Bar -->
    <header class="bg-white dark:bg-neutral-800 shadow-material-2 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo & Brand -->
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-biology rounded-lg flex items-center justify-center shadow-material-1">
                            <span class="material-icons text-white">biotech</span>
                        </div>
                        <div>
                            <h1 class="headline-6 text-neutral-800 dark:text-white">Biology Study Portal</h1>
                            <p class="caption text-neutral-600 dark:text-neutral-400">K-12 Biology Topics</p>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="hidden md:flex items-center space-x-1">
                    <a href="#" class="nav-btn px-4 py-2 text-biology font-medium button-text rounded-lg bg-biology/10">Topics</a>
                    <a href="#" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-biology button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Practice</a>
                    <a href="#" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-biology button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Lab</a>
                    <a href="#" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-biology button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Resources</a>
                </nav>

                <!-- User Actions -->
                <div class="flex items-center space-x-3">
                    <button class="material-button w-10 h-10 bg-neutral-100 dark:bg-neutral-700 rounded-full flex items-center justify-center text-neutral-600 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-600">
                        <span class="material-icons text-lg">search</span>
                    </button>
                    <div class="w-10 h-10 bg-biology rounded-full flex items-center justify-center shadow-material-1">
                        <span class="text-white font-medium text-sm">BM</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="fade-in">
            <!-- Biology Header -->
            <div class="mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h2 class="headline-4 text-neutral-800 dark:text-white mb-2">Biology Topics Hub</h2>
                        <p class="subtitle-1 text-neutral-600 dark:text-neutral-400">Comprehensive K-12 Biology Curriculum</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-right">
                            <p class="overline text-neutral-600 dark:text-neutral-400">Topics Available</p>
                            <div class="flex items-center space-x-2">
                                <span class="headline-6 text-biology">22</span>
                                <span class="body-2 text-neutral-600 dark:text-neutral-400">Total Chapters</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Search Section -->
                <div class="max-w-md mx-auto mb-8">
                    <div class="relative">
                        <input 
                            type="search" 
                            id="searchInput" 
                            placeholder="Search biology topics, organisms, or concepts..."
                            class="w-full text-base px-4 py-3 pl-12 bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-2xl focus:ring-2 focus:ring-biology focus:border-transparent outline-none text-neutral-900 dark:text-neutral-100 shadow-material-1"
                        >
                        <span class="material-icons absolute left-4 top-3.5 text-neutral-400">search</span>
                    </div>
                </div>
            </div>

            <!-- Topics Grid -->
            <div id="topicsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <!-- Topics will be populated by JavaScript -->
            </div>
            
            <!-- No Results Message -->
            <div id="noResults" class="hidden text-center py-12">
                <div class="text-neutral-500 dark:text-neutral-400">
                    <span class="material-icons text-4xl mb-4 block">search_off</span>
                    <h3 class="subtitle-1 mb-2">No topics found</h3>
                    <p class="body-2">Try adjusting your search terms or browse all topics</p>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-12">
                <div class="material-card bg-gradient-to-br from-biology to-biology-600 rounded-2xl p-6 text-white">
                    <div class="flex items-center space-x-3 mb-4">
                        <span class="material-icons text-2xl">calculate</span>
                        <h3 class="subtitle-1">Biology Calculator</h3>
                    </div>
                    <p class="body-2 mb-6 text-biology-100">Calculate genetics problems and biological formulas</p>
                    <button onclick="openCalculator()" class="material-button w-full px-4 py-3 bg-white text-biology rounded-xl shadow-material-1 hover:shadow-material-2">
                        <span class="button-text">Open Calculator</span>
                    </button>
                </div>

                <div class="material-card bg-gradient-to-br from-primary to-primary-600 rounded-2xl p-6 text-white">
                    <div class="flex items-center space-x-3 mb-4">
                        <span class="material-icons text-2xl">quiz</span>
                        <h3 class="subtitle-1">Biology Quiz</h3>
                    </div>
                    <p class="body-2 mb-6 text-primary-100">Test your understanding with interactive quizzes</p>
                    <button onclick="startQuiz()" class="material-button w-full px-4 py-2 bg-white text-primary rounded-xl shadow-material-1 hover:shadow-material-2">
                        <span class="button-text">Start Quiz</span>
                    </button>
                </div>

                <div class="material-card bg-gradient-to-br from-warning to-orange-500 rounded-2xl p-6 text-white">
                    <div class="flex items-center space-x-3 mb-4">
                        <span class="material-icons text-2xl">biotech</span>
                        <h3 class="subtitle-1">Virtual Lab</h3>
                    </div>
                    <p class="body-2 mb-6 text-orange-100">Conduct biology experiments virtually</p>
                    <button onclick="openVirtualLab()" class="material-button w-full px-4 py-3 bg-white text-orange-600 rounded-xl shadow-material-1 hover:shadow-material-2">
                        <span class="button-text">Enter Lab</span>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white dark:bg-neutral-800 border-t border-neutral-200 dark:border-neutral-700 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <p class="body-2 text-neutral-600 dark:text-neutral-400">&copy; 2025 Biology Study Portal. Designed by Raven.</p>
                <p class="caption text-neutral-500 dark:text-neutral-500 mt-2">Exploring the wonders of life sciences</p>
            </div>
        </div>
    </footer>

    <script>
        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Biology topics data organized according to the curriculum
        const biologyTopics = [
            {
                id: 1,
                title: "Variety of Organisms - Characteristics & Cell Structure",
                folderName: "1.variety-organisms-characteristics",
                subtopics: [
                    "Characteristics of living organisms",
                    "Cell structure and functions of cell components",
                    "Levels of organization: Cell, Tissue, Organ, Systems",
                    "Examples: Euglena, Paramecium, Hydra, Onion bulb"
                ],
                subtopicFolders: [
                    "a.characteristics-living-organisms",
                    "b.cell-structure-functions",
                    "c.levels-organization",
                    "d.examples-organisms"
                ],
                icon: "cell_tower",
                color: "biology"
            },
            {
                id: 2,
                title: "Evolution and Classification",
                folderName: "2.evolution-classification",
                subtopics: [
                    "Monera (prokaryotes): bacteria and blue-green algae",
                    "Protista: Amoeba, Euglena, Paramecium",
                    "Fungi: mushroom and Rhizopus",
                    "Plantae: Thallophyta to Spermatophyta",
                    "Animalia: Invertebrates to Vertebrates"
                ],
                subtopicFolders: [
                    "a.monera-prokaryotes",
                    "b.protista",
                    "c.fungi",
                    "d.plantae",
                    "e.animalia"
                ],
                icon: "timeline",
                color: "primary"
            },
            {
                id: 3,
                title: "Structural and Functional Adaptations",
                folderName: "3.adaptations",
                subtopics: [
                    "Adaptive coloration and its functions",
                    "Behavioral adaptations in social animals",
                    "Structural adaptations in organisms",
                    "Camouflage and mimicry",
                    "Environmental adaptations"
                ],
                subtopicFolders: [
                    "a.adaptive-coloration",
                    "b.behavioral-adaptations",
                    "c.structural-adaptations",
                    "d.camouflage-mimicry",
                    "e.environmental-adaptations"
                ],
                icon: "nature",
                color: "data"
            },
            {
                id: 4,
                title: "Internal Structure of Plants and Animals",
                folderName: "4.internal-structure",
                subtopics: [
                    "Internal structure of flowering plants",
                    "Root system structure and functions",
                    "Stem structure and functions",
                    "Leaf structure and functions",
                    "Internal structure of mammals"
                ],
                subtopicFolders: [
                    "a.flowering-plants-structure",
                    "b.root-system",
                    "c.stem-structure",
                    "d.leaf-structure",
                    "e.mammal-structure"
                ],
                icon: "account_tree",
                color: "warning"
            },
            {
                id: 5,
                title: "Nutrition - Modes and Types",
                folderName: "5.nutrition",
                subtopics: [
                    "Autotrophic vs Heterotrophic nutrition",
                    "Photosynthesis and Chemosynthesis",
                    "Types of feeding: Holozoic, Parasitic, Saprophytic",
                    "Carnivorous plants",
                    "Mineral requirements in plants"
                ],
                subtopicFolders: [
                    "a.autotrophic-heterotrophic",
                    "b.photosynthesis-chemosynthesis",
                    "c.types-feeding",
                    "d.carnivorous-plants",
                    "e.mineral-requirements"
                ],
                icon: "restaurant",
                color: "biology"
            },
            {
                id: 6,
                title: "Animal Nutrition and Digestion",
                folderName: "6.animal-nutrition",
                subtopics: [
                    "Classes of food substances",
                    "Food tests: starch, protein, oil, fat",
                    "Mammalian tooth structure and functions",
                    "Mammalian alimentary canal",
                    "Nutrition processes: ingestion to assimilation"
                ],
                subtopicFolders: [
                    "a.food-substances",
                    "b.food-tests",
                    "c.mammalian-teeth",
                    "d.alimentary-canal",
                    "e.nutrition-processes"
                ],
                icon: "dining",
                color: "error"
            },
            {
                id: 7,
                title: "Transport Systems",
                folderName: "7.transport",
                subtopics: [
                    "Need for transportation in organisms",
                    "Materials for transportation",
                    "Mammalian circulatory system",
                    "Plant vascular system: phloem and xylem",
                    "Transport mechanisms and processes"
                ],
                subtopicFolders: [
                    "a.need-transportation",
                    "b.materials-transport",
                    "c.circulatory-system",
                    "d.vascular-system",
                    "e.transport-mechanisms"
                ],
                icon: "linear_scale",
                color: "premium"
            },
            {
                id: 8,
                title: "Respiration",
                folderName: "8.respiration",
                subtopics: [
                    "Respiratory organs and surfaces",
                    "Gaseous exchange in plants",
                    "Gaseous exchange in animals",
                    "Aerobic respiration",
                    "Anaerobic respiration"
                ],
                subtopicFolders: [
                    "a.respiratory-organs",
                    "b.gaseous-exchange-plants",
                    "c.gaseous-exchange-animals",
                    "d.aerobic-respiration",
                    "e.anaerobic-respiration"
                ],
                icon: "air",
                color: "accent"
            },
            {
                id: 9,
                title: "Excretion",
                folderName: "9.excretion",
                subtopics: [
                    "Types of excretory structures",
                    "Kidneys and their functions",
                    "Lungs and skin as excretory organs",
                    "Excretory products of plants",
                    "Excretory mechanisms"
                ],
                subtopicFolders: [
                    "a.excretory-structures",
                    "b.kidney-functions",
                    "c.lungs-skin-excretion",
                    "d.plant-excretory-products",
                    "e.excretory-mechanisms"
                ],
                icon: "filter_alt",
                color: "primary"
            },
            {
                id: 10,
                title: "Support and Movement",
                folderName: "10.support-movement",
                subtopics: [
                    "Plant movements: tropic, tactic, nastic",
                    "Supporting tissues in animals",
                    "Types of skeleton: exo and endoskeleton",
                    "Functions of skeleton in animals",
                    "Locomotion mechanisms"
                ],
                subtopicFolders: [
                    "a.plant-movements",
                    "b.supporting-tissues",
                    "c.skeleton-types",
                    "d.skeleton-functions",
                    "e.locomotion-mechanisms"
                ],
                icon: "directions_run",
                color: "data"
            },
            {
                id: 11,
                title: "Reproduction - Asexual and Sexual",
                folderName: "11.reproduction",
                subtopics: [
                    "Asexual reproduction: fission, budding",
                    "Vegetative propagation: natural and artificial",
                    "Sexual reproduction in flowering plants",
                    "Pollination and fertilization",
                    "Reproduction in mammals"
                ],
                subtopicFolders: [
                    "a.asexual-reproduction",
                    "b.vegetative-propagation",
                    "c.sexual-reproduction-plants",
                    "d.pollination-fertilization",
                    "e.mammalian-reproduction"
                ],
                icon: "family_restroom",
                color: "warning"
            },
            {
                id: 12,
                title: "Growth and Development",
                folderName: "12.growth",
                subtopics: [
                    "Meaning and characteristics of growth",
                    "Germination of seeds",
                    "Conditions necessary for germination",
                    "Growth patterns in plants",
                    "Growth patterns in animals"
                ],
                subtopicFolders: [
                    "a.meaning-growth",
                    "b.seed-germination",
                    "c.germination-conditions",
                    "d.plant-growth-patterns",
                    "e.animal-growth-patterns"
                ],
                icon: "trending_up",
                color: "biology"
            },
            {
                id: 13,
                title: "Coordination and Control - Nervous System",
                folderName: "13.nervous-coordination",
                subtopics: [
                    "Central nervous system components",
                    "Peripheral nervous system",
                    "Transmission of impulses",
                    "Reflex action mechanisms",
                    "Sense organs: skin, nose, tongue, eye, ear"
                ],
                subtopicFolders: [
                    "a.central-nervous-system",
                    "b.peripheral-nervous-system",
                    "c.impulse-transmission",
                    "d.reflex-action",
                    "e.sense-organs"
                ],
                icon: "psychology",
                color: "error"
            },
            {
                id: 14,
                title: "Hormonal Control and Homeostasis",
                folderName: "14.hormonal-control",
                subtopics: [
                    "Animal hormonal system",
                    "Endocrine glands: pituitary, thyroid, adrenals",
                    "Plant hormones (phytohormones)",
                    "Body temperature regulation",
                    "Salt and water regulation"
                ],
                subtopicFolders: [
                    "a.animal-hormonal-system",
                    "b.endocrine-glands",
                    "c.plant-hormones",
                    "d.temperature-regulation",
                    "e.salt-water-regulation"
                ],
                icon: "science",
                color: "premium"
            },
            {
                id: 15,
                title: "Ecology - Distribution and Interactions",
                folderName: "15.ecology-factors",
                subtopics: [
                    "Abiotic factors affecting distribution",
                    "Biotic factors affecting distribution",
                    "Symbiotic interactions",
                    "Energy flow in ecosystems",
                    "Food chains and food webs"
                ],
                subtopicFolders: [
                    "a.abiotic-factors",
                    "b.biotic-factors",
                    "c.symbiotic-interactions",
                    "d.energy-flow",
                    "e.food-chains-webs"
                ],
                icon: "eco",
                color: "accent"
            },
            {
                id: 16,
                title: "Nutrient Cycling and Habitats",
                folderName: "16.nutrient-cycling",
                subtopics: [
                    "Carbon cycle",
                    "Water cycle",
                    "Nitrogen cycle",
                    "Aquatic habitats: ponds, streams, lakes",
                    "Terrestrial habitats: savanna, forest"
                ],
                subtopicFolders: [
                    "a.carbon-cycle",
                    "b.water-cycle",
                    "c.nitrogen-cycle",
                    "d.aquatic-habitats",
                    "e.terrestrial-habitats"
                ],
                icon: "water_drop",
                color: "primary"
            },
            {
                id: 17,
                title: "Nigerian Biomes",
                folderName: "17.nigerian-biomes",
                subtopics: [
                    "Tropical rainforest",
                    "Guinea savanna (southern and northern)",
                    "Sudan Savanna",
                    "Desert regions",
                    "Highland forests and grasslands"
                ],
                subtopicFolders: [
                    "a.tropical-rainforest",
                    "b.guinea-savanna",
                    "c.sudan-savanna",
                    "d.desert-regions",
                    "e.highland-forests"
                ],
                icon: "landscape",
                color: "data"
            },
            {
                id: 18,
                title: "Population Ecology",
                folderName: "18.population-ecology",
                subtopics: [
                    "Population density and overcrowding",
                    "Adaptation for survival",
                    "Competition: intraspecific and interspecific",
                    "Factors affecting population sizes",
                    "Ecological succession"
                ],
                subtopicFolders: [
                    "a.population-density",
                    "b.survival-adaptations",
                    "c.competition",
                    "d.population-factors",
                    "e.ecological-succession"
                ],
                icon: "groups",
                color: "warning"
            },
            {
                id: 19,
                title: "Soil Ecology",
                folderName: "19.soil-ecology",
                subtopics: [
                    "Soil types: sandy, loamy, clayey",
                    "Soil structure and porosity",
                    "Soil components: organic and inorganic",
                    "Soil fertility and maintenance",
                    "Soil organisms and their roles"
                ],
                subtopicFolders: [
                    "a.soil-types",
                    "b.soil-structure",
                    "c.soil-components",
                    "d.soil-fertility",
                    "e.soil-organisms"
                ],
                icon: "grass",
                color: "biology"
            },
            {
                id: 20,
                title: "Humans and Environment",
                folderName: "20.humans-environment",
                subtopics: [
                    "Common and endemic diseases",
                    "Transmissible diseases: cholera, tuberculosis",
                    "Pollution sources and control",
                    "Conservation of natural resources",
                    "Game reserves and national parks"
                ],
                subtopicFolders: [
                    "a.diseases",
                    "b.transmissible-diseases",
                    "c.pollution-control",
                    "d.conservation",
                    "e.reserves-parks"
                ],
                icon: "health_and_safety",
                color: "error"
            },
            {
                id: 21,
                title: "Variation in Population",
                folderName: "21.variation",
                subtopics: [
                    "Morphological variations",
                    "Physiological variations",
                    "Discontinuous variation applications",
                    "Crime detection and blood transfusion",
                    "Determination of paternity"
                ],
                subtopicFolders: [
                    "a.morphological-variations",
                    "b.physiological-variations",
                    "c.discontinuous-variation",
                    "d.crime-detection",
                    "e.paternity-determination"
                ],
                icon: "diversity_3",
                color: "premium"
            },
            {
                id: 22,
                title: "Heredity and Evolution",
                folderName: "22.heredity-evolution",
                subtopics: [
                    "Inheritance of characters",
                    "Chromosomes as basis of heredity",
                    "Sex determination and sex-linked traits",
                    "Theories of evolution: Lamarck and Darwin",
                    "Evidence of evolution"
                ],
                subtopicFolders: [
                    "a.inheritance-characters",
                    "b.chromosomes-heredity",
                    "c.sex-determination",
                    "d.evolution-theories",
                    "e.evolution-evidence"
                ],
                icon: "dna",
                color: "accent"
            }
        ];

        // Function to get color classes based on color name
        function getColorClasses(colorName) {
            const colorMap = {
                primary: { bg: 'bg-primary', text: 'text-white' },
                accent: { bg: 'bg-accent', text: 'text-white' },
                data: { bg: 'bg-data-500', text: 'text-white' },
                warning: { bg: 'bg-warning', text: 'text-white' },
                error: { bg: 'bg-error', text: 'text-white' },
                premium: { bg: 'bg-premium-600', text: 'text-white' },
                biology: { bg: 'bg-biology', text: 'text-white' },
                success: { bg: 'bg-success', text: 'text-white' }
            };
            return colorMap[colorName] || colorMap.biology;
        }

        // Function to create topic card HTML
        function createTopicCard(topic) {
            const subtopicsHTML = topic.subtopics.length > 0 
                ? `<div class="mt-4 space-y-2">
                    ${topic.subtopics.slice(0, 3).map(subtopic => 
                        `<div class="body-2 text-neutral-600 dark:text-neutral-400 flex items-center">
                            <span class="material-icons text-xs mr-2 text-neutral-400">chevron_right</span>
                            ${subtopic}
                        </div>`
                    ).join('')}
                    ${topic.subtopics.length > 3 ? 
                        `<div class="caption text-neutral-500 dark:text-neutral-500 italic">
                            +${topic.subtopics.length - 3} more topics
                        </div>` : ''}
                   </div>`
                : '';

            const colors = getColorClasses(topic.color);

            return `
                <div class="material-card biology-card rounded-2xl p-6 shadow-material-1 interactive-element" 
                     data-folder="${topic.folderName}" 
                     data-title="${topic.title.replace(/"/g, '&quot;').replace(/'/g, '&#39;')}"
                     onclick="openTopic(this.dataset.folder, this.dataset.title)">
                    <div class="flex items-start justify-between mb-4">
                        <div class="w-12 h-12 ${colors.bg} rounded-xl flex items-center justify-center shadow-material-1">
                            <span class="material-icons ${colors.text}">${topic.icon}</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="caption bg-neutral-100 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400 px-2 py-1 rounded-full">
                                Topic ${topic.id}
                            </span>
                            ${topic.subtopics.length > 0 ? 
                                `<span class="caption bg-biology/10 text-biology px-2 py-1 rounded-full">
                                    ${topic.subtopics.length} parts
                                </span>` : ''}
                        </div>
                    </div>
                    
                    <h3 class="subtitle-1 mb-2 text-neutral-800 dark:text-neutral-100 leading-tight">
                        ${topic.title}
                    </h3>
                    
                    ${subtopicsHTML}
                    
                    <div class="flex items-center justify-end mt-4 pt-4 border-t border-neutral-200 dark:border-neutral-700">
                        <span class="material-icons text-neutral-400">arrow_forward</span>
                    </div>
                </div>
            `;
        }

        // Function to render topics
        function renderTopics(topics) {
            const grid = document.getElementById('topicsGrid');
            const noResults = document.getElementById('noResults');
            
            if (topics.length === 0) {
                grid.classList.add('hidden');
                noResults.classList.remove('hidden');
            } else {
                grid.classList.remove('hidden');
                noResults.classList.add('hidden');
                grid.innerHTML = topics.map(topic => createTopicCard(topic)).join('');
            }
        }

        // Function to highlight search terms
        function highlightSearchTerm(text, searchTerm) {
            if (!searchTerm) return text;
            const regex = new RegExp(`(${searchTerm})`, 'gi');
            return text.replace(regex, '<span class="search-highlight">$1</span>');
        }

        // Search functionality
        function performSearch(searchTerm) {
            const filtered = biologyTopics.filter(topic => {
                const titleMatch = topic.title.toLowerCase().includes(searchTerm.toLowerCase());
                const subtopicMatch = topic.subtopics.some(subtopic => 
                    subtopic.toLowerCase().includes(searchTerm.toLowerCase())
                );
                return titleMatch || subtopicMatch;
            });

            // Highlight search terms in results
            const highlightedTopics = filtered.map(topic => ({
                ...topic,
                title: highlightSearchTerm(topic.title, searchTerm),
                subtopics: topic.subtopics.map(subtopic => 
                    highlightSearchTerm(subtopic, searchTerm)
                )
            }));

            renderTopics(highlightedTopics);
        }

        // Function to handle topic opening
        function openTopic(folderName, title) {
            const topic = biologyTopics.find(t => t.folderName === folderName);
            
            if (topic && topic.subtopics.length > 0) {
                // Topic has subtopics - show subtopic selection modal
                showSubtopicModal(topic);
            } else {
                // Topic has no subtopics - go directly to content
                showMaterialToast(`Opening ${title}...`, 'info');
                setTimeout(() => {
                    // Navigate to actual GitHub Pages directory structure
                    window.location.href = `https://demymichaels.github.io/raven/src/learning-materials/biology/${folderName}/`;
                }, 300);
            }
        }

        // Function to show subtopic selection modal
        function showSubtopicModal(topic) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            
            const colors = getColorClasses(topic.color);
            
            modal.innerHTML = `
                <div class="material-card bg-white dark:bg-neutral-800 rounded-2xl shadow-material-5 max-w-2xl w-full max-h-[80vh] overflow-hidden">
                    <!-- Modal Header -->
                    <div class="flex items-center justify-between p-6 border-b border-neutral-200 dark:border-neutral-700">
                        <div class="flex items-center space-x-4">
                            <div class="w-10 h-10 ${colors.bg} rounded-xl flex items-center justify-center shadow-material-1">
                                <span class="material-icons ${colors.text}">${topic.icon}</span>
                            </div>
                            <div>
                                <h3 class="headline-6 text-neutral-800 dark:text-neutral-100">${topic.title}</h3>
                                <p class="body-2 text-neutral-600 dark:text-neutral-400">${topic.subtopics.length} subtopics available</p>
                            </div>
                        </div>
                        <button onclick="this.closest('.fixed').remove()" class="material-button w-10 h-10 bg-neutral-100 dark:bg-neutral-700 rounded-full flex items-center justify-center text-neutral-600 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-600">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                    
                    <!-- Modal Content -->
                    <div class="p-6 overflow-y-auto max-h-[60vh]">
                        <div class="mb-4">
                            <button onclick="navigateToTopic('${topic.folderName}', '${topic.title}', 'overview')" class="w-full material-button bg-gradient-to-r ${colors.bg} hover:opacity-90 text-white rounded-xl p-4 mb-4 text-left">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <div class="subtitle-1 mb-1">🧬 Complete Topic Overview</div>
                                        <div class="body-2 opacity-90">Comprehensive guide covering all aspects</div>
                                    </div>
                                    <span class="material-icons">arrow_forward</span>
                                </div>
                            </button>
                        </div>
                        
                        <div class="space-y-3">
                            <h4 class="subtitle-2 text-neutral-700 dark:text-neutral-300 mb-4">Individual Subtopics:</h4>
                            ${topic.subtopics.map((subtopic, index) => `
                                <button onclick="navigateToTopic('${topic.folderName}', '${topic.title}', ${index})" class="w-full material-button bg-neutral-50 dark:bg-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-600 rounded-xl p-4 text-left border border-neutral-200 dark:border-neutral-600">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 bg-biology/10 dark:bg-biology/20 rounded-lg flex items-center justify-center">
                                                <span class="body-2 font-medium text-biology">${index + 1}</span>
                                            </div>
                                            <div>
                                                <div class="subtitle-2 text-neutral-800 dark:text-neutral-100">${subtopic}</div>
                                                <div class="caption text-neutral-600 dark:text-neutral-400">Subtopic ${index + 1} of ${topic.subtopics.length}</div>
                                            </div>
                                        </div>
                                        <span class="material-icons text-neutral-400">chevron_right</span>
                                    </div>
                                </button>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- Modal Footer -->
                    <div class="flex items-center justify-between p-6 border-t border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-750">
                        <div class="flex items-center space-x-2 text-neutral-600 dark:text-neutral-400">
                            <span class="material-icons text-sm">info</span>
                            <span class="caption">Choose overview for complete topic or individual subtopics</span>
                        </div>
                        <button onclick="this.closest('.fixed').remove()" class="material-button px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg">
                            <span class="button-text">Cancel</span>
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Add fade-in animation
            setTimeout(() => {
                modal.querySelector('.material-card').classList.add('fade-in');
            }, 50);
        }

        // Function to navigate to specific topic or subtopic
        function navigateToTopic(folderName, title, type) {
            const modal = document.querySelector('.fixed.inset-0');
            if (modal) modal.remove();
            
            const topic = biologyTopics.find(t => t.folderName === folderName);
            let url;
            let message;
            
            if (type === 'overview') {
                url = `https://demymichaels.github.io/raven/src/learning-materials/biology/${folderName}/`;
                message = `Opening ${title} overview...`;
            } else {
                // For subtopics, use the actual folder names from subtopicFolders
                const subtopicIndex = parseInt(type);
                if (topic && topic.subtopicFolders && topic.subtopicFolders[subtopicIndex]) {
                    const subtopicFolderName = topic.subtopicFolders[subtopicIndex];
                    url = `https://demymichaels.github.io/raven/src/learning-materials/biology/${folderName}/${subtopicFolderName}/`;
                    message = `Opening ${topic.subtopics[subtopicIndex]}...`;
                } else {
                    // Fallback to main topic if subtopic folder not found
                    url = `https://demymichaels.github.io/raven/src/learning-materials/biology/${folderName}/`;
                    message = `Opening ${title}...`;
                }
            }
            
            showMaterialToast(message, 'info');
            setTimeout(() => {
                window.location.href = url;
            }, 300);
        }

        // Material Design Toast System
        function showMaterialToast(message, type = 'info') {
            const toastContainer = document.getElementById('toast-container') || createToastContainer();

            const toast = document.createElement('div');
            const iconMap = {
                success: 'check_circle',
                error: 'error',
                warning: 'warning',
                info: 'info'
            };

            const colorMap = {
                success: 'bg-success text-white',
                error: 'bg-error text-white',
                warning: 'bg-warning text-white',
                info: 'bg-biology text-white'
            };

            toast.className = `material-card flex items-center space-x-3 px-6 py-4 rounded-2xl shadow-material-3 ${colorMap[type]} transform translate-y-2 opacity-0 transition-all duration-300 mb-4`;

            toast.innerHTML = `
                <span class="material-icons">${iconMap[type]}</span>
                <span class="subtitle-2 flex-1">${message}</span>
                <button onclick="this.parentElement.remove()" class="material-icons hover:bg-white/10 rounded-full p-1">close</button>
            `;

            toastContainer.appendChild(toast);

            // Animate in
            setTimeout(() => {
                toast.classList.remove('translate-y-2', 'opacity-0');
            }, 100);

            // Auto remove after 4 seconds
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.classList.add('translate-y-2', 'opacity-0');
                    setTimeout(() => toast.remove(), 300);
                }
            }, 4000);
        }

        function createToastContainer() {
            const container = document.createElement('div');
            container.id = 'toast-container';
            container.className = 'fixed bottom-6 left-6 z-50 max-w-sm';
            document.body.appendChild(container);
            return container;
        }

        // Quick action functions
        function openCalculator() {
            showMaterialToast('Opening Biology Calculator...', 'info');
        }

        function startQuiz() {
            showMaterialToast('Starting Biology Quiz...', 'info');
        }

        function openVirtualLab() {
            showMaterialToast('Entering Virtual Biology Lab...', 'info');
        }

        // Initialize search
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const searchTerm = e.target.value.trim();
            if (searchTerm === '') {
                renderTopics(biologyTopics);
            } else {
                performSearch(searchTerm);
            }
        });

        // Initial render
        renderTopics(biologyTopics);

        // Make functions globally available
        window.openTopic = openTopic;
        window.navigateToTopic = navigateToTopic;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                showMaterialToast('Welcome to Biology Study Portal! 🧬', 'success');
            }, 1000);
        });
    </script>
</body>
</html>
