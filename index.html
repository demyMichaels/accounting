<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Light vs Sound Waves Demonstration - ProVista Professional</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        // ProVista Professional Brand Colors
                        primary: {
                            DEFAULT: "#0F2C59", // Deep Navy - Trust, Authority, Stability
                            50: "#f0f3f8",
                            100: "#d6e1ee",
                            500: "#0F2C59",
                            600: "#0a2549",
                            700: "#081e39",
                        },
                        accent: {
                            DEFAULT: "#009F9D", // Consultancy Teal - Innovation, Precision
                            50: "#e6f7f7",
                            100: "#b3ebea",
                            500: "#009F9D",
                            600: "#008280",
                            700: "#006663",
                        },
                        neutral: {
                            25: "#FEFEFE",
                            50: "#F8F9FA", // Warm Light Gray - Cleanliness, Clarity
                            100: "#F1F3F4",
                            200: "#E8EAED",
                            300: "#DADCE0",
                            400: "#BDC1C6",
                            500: "#9AA0A6",
                            600: "#80868B",
                            700: "#5F6368",
                            800: "#2D3748", // Charcoal - Sophistication, Legibility
                            900: "#1F2937",
                        },
                        premium: {
                            DEFAULT: "#D2C1A7", // Pale Sand - Warmth, Approachability
                            50: "#fbf9f6",
                            100: "#f4efe6",
                            500: "#D2C1A7",
                            600: "#c4b095",
                            700: "#b69f83",
                        },
                        data: {
                            DEFAULT: "#5A7B9E", // Steel Blue - Logic, Intelligence
                            50: "#f2f5f9",
                            100: "#e1e9f2",
                            500: "#5A7B9E",
                            600: "#4d6a87",
                            700: "#405970",
                        },
                        success: "#22c55e",
                        warning: "#f59e0b",
                        error: "#ef4444",
                    },
                    boxShadow: {
                        'material-1': '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)',
                        'material-2': '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)',
                        'material-3': '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)',
                        'material-4': '0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)',
                        'material-5': '0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)',
                    },
                    fontFamily: {
                        'sans': ['Roboto', 'system-ui', 'sans-serif'],
                    },
                    borderRadius: {
                        'material': '4px',
                    }
                }
            }
        }
    </script>
    <style>
        /* Material Design Animations and Effects */
        .fade-in {
            animation: fadeIn 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(16px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .material-card {
            transition: box-shadow 0.28s cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        
        .material-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .material-button {
            transition: all 0.15s cubic-bezier(0.4, 0.0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .material-button:active {
            transform: scale(0.98);
        }
        
        .material-fab {
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 5px -1px rgba(0,0,0,0.2), 0 6px 10px 0 rgba(0,0,0,0.14), 0 1px 18px 0 rgba(0,0,0,0.12);
            transition: box-shadow 0.28s cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        
        .material-fab:hover {
            box-shadow: 0 5px 5px -3px rgba(0,0,0,0.2), 0 8px 10px 1px rgba(0,0,0,0.14), 0 3px 14px 2px rgba(0,0,0,0.12);
        }
        
        .ripple {
            position: relative;
            overflow: hidden;
        }
        
        .ripple::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .ripple:active::before {
            width: 300px;
            height: 300px;
        }
        
        /* Material Design Typography Scale */
        .headline-1 { font-size: 6rem; font-weight: 300; line-height: 1.167; letter-spacing: -1.5px; }
        .headline-2 { font-size: 3.75rem; font-weight: 300; line-height: 1.2; letter-spacing: -0.5px; }
        .headline-3 { font-size: 3rem; font-weight: 400; line-height: 1.167; letter-spacing: 0; }
        .headline-4 { font-size: 2.125rem; font-weight: 400; line-height: 1.235; letter-spacing: 0.25px; }
        .headline-5 { font-size: 1.5rem; font-weight: 400; line-height: 1.334; letter-spacing: 0; }
        .headline-6 { font-size: 1.25rem; font-weight: 500; line-height: 1.6; letter-spacing: 0.15px; }
        .subtitle-1 { font-size: 1rem; font-weight: 400; line-height: 1.75; letter-spacing: 0.15px; }
        .subtitle-2 { font-size: 0.875rem; font-weight: 500; line-height: 1.57; letter-spacing: 0.1px; }
        .body-1 { font-size: 1rem; font-weight: 400; line-height: 1.5; letter-spacing: 0.5px; }
        .body-2 { font-size: 0.875rem; font-weight: 400; line-height: 1.43; letter-spacing: 0.25px; }
        .button-text { font-size: 0.875rem; font-weight: 500; line-height: 1.75; letter-spacing: 1.25px; text-transform: uppercase; }
        .caption { font-size: 0.75rem; font-weight: 400; line-height: 1.66; letter-spacing: 0.4px; }
        .overline { font-size: 0.75rem; font-weight: 400; line-height: 2.66; letter-spacing: 1px; text-transform: uppercase; }

        /* Canvas and Wave Visualizations */
        .canvas-container {
            position: relative;
            width: 100%;
            height: 200px;
            margin-bottom: 1rem;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 8px;
        }
        
        /* Light spectrum display */
        .light-spectrum {
            height: 40px;
            background: linear-gradient(to right, 
                #8a2be2, /* Violet ~400nm */
                #4b0082, /* Indigo ~450nm */
                #0000ff, /* Blue ~475nm */
                #00ff00, /* Green ~510nm */
                #ffff00, /* Yellow ~570nm */
                #ff7f00, /* Orange ~590nm */
                #ff0000  /* Red ~650nm */
            );
            position: relative;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .wavelength-indicator {
            position: absolute;
            height: 100%;
            width: 3px;
            background-color: white;
            top: 0;
            transform: translateX(-50%);
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
            border-radius: 2px;
        }
        
        /* Custom Material Sliders */
        .material-slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            background: #d3d3d3;
            outline: none;
            border-radius: 3px;
            transition: all 0.2s ease;
        }
        .material-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #009F9D;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.2s ease;
        }
        .material-slider::-webkit-slider-thumb:hover {
            box-shadow: 0 0 0 8px rgba(0, 159, 157, 0.16);
        }
        .material-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #009F9D;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        /* Professional Input Styling */
        .material-input {
            border: 2px solid #E8EAED;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-size: 16px; /* Prevent zoom on mobile */
        }
        .material-input:focus {
            border-color: #009F9D;
            box-shadow: 0 0 0 3px rgba(0, 159, 157, 0.16);
            outline: none;
        }
        
        /* Professional Button Styling */
        .btn-primary {
            background: linear-gradient(135deg, #0F2C59 0%, #009F9D 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 500;
            letter-spacing: 0.5px;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(15, 44, 89, 0.2);
        }
        .btn-primary:hover {
            box-shadow: 0 4px 8px rgba(15, 44, 89, 0.3);
            transform: translateY(-1px);
        }
        .btn-primary:active {
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(15, 44, 89, 0.2);
        }
        
        .btn-secondary {
            background: #F8F9FA;
            color: #0F2C59;
            border: 2px solid #E8EAED;
            border-radius: 8px;
            padding: 10px 22px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .btn-secondary:hover {
            background: #F1F3F4;
            border-color: #009F9D;
            color: #009F9D;
        }
        
        /* Enhanced Wave Info Cards */
        .wave-info-card {
            background: linear-gradient(135deg, rgba(15, 44, 89, 0.05) 0%, rgba(0, 159, 157, 0.05) 100%);
            border: 1px solid rgba(0, 159, 157, 0.2);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        /* Interactive Learning Components */
        .learning-tab {
            transition: all 0.2s ease;
            border-bottom: 3px solid transparent;
        }
        .learning-tab.active {
            color: #0F2C59;
            border-bottom-color: #009F9D;
            background: linear-gradient(135deg, rgba(15, 44, 89, 0.05) 0%, rgba(0, 159, 157, 0.05) 100%);
        }
        
        /* Enhanced Dark Mode Support */
        .dark .material-card {
            background-color: #1F2937;
            border-color: #374151;
        }
        .dark .material-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        .dark .wave-info-card {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.8) 0%, rgba(0, 159, 157, 0.1) 100%);
            border-color: rgba(0, 159, 157, 0.3);
        }
        .dark .material-input {
            background-color: #374151;
            border-color: #4B5563;
            color: #F9FAFB;
        }
        .dark .material-input:focus {
            border-color: #009F9D;
        }
        
        /* Professional Toggle Switch */
        .material-toggle {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        .material-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .material-toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 17px;
        }
        .material-toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        input:checked + .material-toggle-slider {
            background-color: #009F9D;
        }
        input:checked + .material-toggle-slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body class="bg-neutral-50 dark:bg-neutral-900 text-neutral-800 dark:text-neutral-200 font-sans">
    <div class="max-w-6xl mx-auto p-6">
        <!-- Header Section -->
        <div class="text-center mb-12 fade-in">
            <h1 class="headline-4 text-primary-500 mb-4">Light vs. Sound Waves</h1>
            <p class="subtitle-1 text-neutral-600 dark:text-neutral-400">Interactive Physics Demonstration</p>
            <div class="w-24 h-1 bg-gradient-to-r from-primary-500 to-accent-500 mx-auto mt-4 rounded-full"></div>
        </div>
        
        <!-- Light Wave Section -->
        <div class="mb-16 fade-in">
            <div class="material-card bg-neutral-25 dark:bg-neutral-800 rounded-xl shadow-material-2 p-8 mb-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="headline-5 text-primary-500 flex items-center">
                        <span class="material-icons text-accent-500 mr-3">wb_sunny</span>
                        Light Wave (Transverse - Electromagnetic)
                    </h2>
                    <button id="lightInfoButton" class="material-fab bg-gradient-to-br from-primary-500 to-accent-500 text-white hover:shadow-material-3">
                        <span class="material-icons">info</span>
                    </button>
                </div>
                
                <!-- Light Controls -->
                <div class="wave-info-card p-6 mb-6">
                    <h3 class="headline-6 text-primary-600 dark:text-primary-100 mb-4">Light Wavelength & Color</h3>
                    <p class="body-2 text-neutral-600 dark:text-neutral-300 mb-4">Adjust the wavelength to see how it affects the wave pattern and color spectrum.</p>
                    
                    <div class="light-spectrum mb-4">
                        <div id="wavelengthIndicator" class="wavelength-indicator" style="left: 50%"></div>
                    </div>
                    
                    <div class="flex text-xs justify-between mb-4 text-neutral-500">
                        <span>Violet (400nm)</span>
                        <span>Green (510nm)</span>
                        <span>Red (650nm)</span>
                    </div>
                    
                    <input type="range" id="lightColorRange" class="material-slider mb-6" min="400" max="700" value="550">
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="flex items-center space-x-4">
                            <div id="currentColorDisplay" class="w-20 h-20 rounded-xl shadow-material-2 bg-green-500 border-2 border-neutral-200 dark:border-neutral-600"></div>
                            <div>
                                <div class="subtitle-2 mb-2"><strong>Wavelength:</strong> <span id="lightColorWavelength" class="text-accent-600">550</span> nm</div>
                                <div class="subtitle-2"><strong>Color:</strong> <span id="lightColorName" class="text-primary-600">Green</span></div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center space-x-3">
                                <span class="caption text-neutral-600 dark:text-neutral-400 w-20">Amplitude:</span>
                                <input type="range" id="lightAmplitudeRange" min="10" max="60" value="40" 
                                    class="material-slider flex-1">
                                <span id="lightAmplitudeValue" class="caption text-accent-600 w-8">40</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="caption text-neutral-600 dark:text-neutral-400 w-20">Speed:</span>
                                <input type="range" id="lightSpeedRange" min="1" max="10" value="5" 
                                    class="material-slider flex-1">
                                <span id="lightSpeedValue" class="caption text-accent-600 w-8">5</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Light Wave Visualization -->
                <div class="relative canvas-container bg-gradient-to-br from-neutral-100 to-neutral-200 dark:from-neutral-700 dark:to-neutral-800 rounded-xl shadow-material-1">
                    <canvas id="lightCanvas"></canvas>
                    <div id="lightMeasureTools" class="absolute top-4 right-4">
                        <button id="lightMeasureToggle" class="btn-secondary text-sm material-button ripple">
                            Measure
                        </button>
                    </div>
                    <div id="lightFrequencyDisplay" class="absolute bottom-4 left-4 bg-white/90 dark:bg-neutral-800/90 backdrop-blur-sm px-3 py-2 rounded-lg shadow-material-1">
                        <span class="caption text-neutral-600 dark:text-neutral-300">Frequency: <span id="lightFreqValue" class="text-accent-600 font-medium">0.8</span> Hz</span>
                    </div>
                </div>
                
                <div class="wave-info-card p-4 mt-4">
                    <p class="body-2 text-neutral-700 dark:text-neutral-300">
                        <span class="font-medium text-accent-600">Light waves</span> are <strong>transverse waves</strong> - they oscillate perpendicular to their direction of travel. 
                        They can travel through a vacuum and don't require a medium to propagate.
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Sound Wave Section -->
        <div class="mb-16 fade-in">
            <div class="material-card bg-neutral-25 dark:bg-neutral-800 rounded-xl shadow-material-2 p-8 mb-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="headline-5 text-primary-500 flex items-center">
                        <span class="material-icons text-data-500 mr-3">graphic_eq</span>
                        Sound Wave (Longitudinal - Mechanical)
                    </h2>
                    <button id="soundInfoButton" class="material-fab bg-gradient-to-br from-data-500 to-accent-500 text-white hover:shadow-material-3">
                        <span class="material-icons">info</span>
                    </button>
                </div>
                
                <!-- Sound Controls -->
                <div class="wave-info-card p-6 mb-6">
                    <h3 class="headline-6 text-primary-600 dark:text-primary-100 mb-4">Sound Frequency & Waveform</h3>
                    <p class="body-2 text-neutral-600 dark:text-neutral-300 mb-4">Adjust the frequency and volume to hear and see the sound wave change in real time.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="subtitle-2 text-neutral-700 dark:text-neutral-300 block mb-2">Frequency (Hz)</label>
                            <div class="flex items-center space-x-3">
                                <input type="range" id="audioFrequencyRange" class="material-slider flex-1" min="20" max="1000" value="440" step="1">
                                <span id="audioFrequencyValue" class="caption text-data-600 w-12 text-right font-medium">440</span>
                            </div>
                            <div class="flex justify-between text-xs mt-2 text-neutral-500">
                                <span>Low (20Hz)</span>
                                <span>High (1000Hz)</span>
                            </div>
                        </div>
                        
                        <div>
                            <label class="subtitle-2 text-neutral-700 dark:text-neutral-300 block mb-2">Volume (Amplitude)</label>
                            <div class="flex items-center space-x-3">
                                <input type="range" id="audioVolumeRange" class="material-slider flex-1" min="0" max="100" value="50" step="1">
                                <span id="audioVolumeValue" class="caption text-data-600 w-12 text-right font-medium">50%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div>
                            <label class="subtitle-2 text-neutral-700 dark:text-neutral-300 block mb-2">Waveform</label>
                            <select id="audioWaveformSelect" class="material-input w-full p-3 text-neutral-800 dark:text-neutral-200">
                                <option value="sine">Sine Wave</option>
                                <option value="square">Square Wave</option>
                                <option value="sawtooth">Sawtooth Wave</option>
                                <option value="triangle">Triangle Wave</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="subtitle-2 text-neutral-700 dark:text-neutral-300 block mb-2">Propagation Speed</label>
                            <div class="flex items-center space-x-3">
                                <input type="range" id="soundSpeedRange" min="0" max="5" value="1" 
                                    class="material-slider flex-1">
                                <span id="soundSpeedValue" class="caption text-data-600 w-8 text-right font-medium">1</span>
                            </div>
                        </div>
                        
                        <div class="flex items-end">
                            <button id="audioPlayButton" class="btn-primary w-full material-button ripple flex items-center justify-center">
                                <span class="material-icons mr-2">play_arrow</span>
                                <span class="button-text">Play</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gradient-to-br from-premium-100 to-premium-200 dark:from-premium-700 dark:to-premium-600 p-4 rounded-xl text-center">
                            <div id="musicalNoteDisplay" class="subtitle-1 font-bold text-primary-700 dark:text-primary-100">A4 (440 Hz)</div>
                            <div class="caption text-neutral-600 dark:text-neutral-300">Closest musical note</div>
                        </div>
                        
                        <div id="waveformVisualization" class="bg-gradient-to-br from-neutral-100 to-neutral-200 dark:from-neutral-700 dark:to-neutral-600 rounded-xl relative">
                            <canvas id="waveformCanvas" class="w-full h-full rounded-xl"></canvas>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <p id="noAudioMessage" class="hidden text-error body-2">Your browser doesn't support audio generation. Try a different browser.</p>
                    </div>
                </div>
                
                <!-- Sound Wave Visualization -->
                <div class="relative canvas-container bg-gradient-to-br from-neutral-100 to-neutral-200 dark:from-neutral-700 dark:to-neutral-800 rounded-xl shadow-material-1">
                    <canvas id="soundCanvas"></canvas>
                    <div id="soundMeasureTools" class="absolute top-4 right-4">
                        <button id="soundMeasureToggle" class="btn-secondary text-sm material-button ripple">
                            Measure
                        </button>
                    </div>
                    <div id="soundFrequencyDisplay" class="absolute bottom-4 left-4 bg-white/90 dark:bg-neutral-800/90 backdrop-blur-sm px-3 py-2 rounded-lg shadow-material-1">
                        <span class="caption text-neutral-600 dark:text-neutral-300">Frequency: <span id="soundFreqValue" class="text-data-600 font-medium">0.16</span> Hz</span>
                    </div>
                </div>
                
                <div class="wave-info-card p-4 mt-4">
                    <p class="body-2 text-neutral-700 dark:text-neutral-300">
                        <span class="font-medium text-data-600">Sound waves</span> are <strong>longitudinal waves</strong> - particles oscillate parallel to the direction of travel, 
                        creating compressions and rarefactions. Sound requires a medium (like air) to propagate.
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Medium Control -->
        <div class="flex justify-center mb-12">
            <div class="material-card bg-neutral-25 dark:bg-neutral-800 rounded-xl shadow-material-2 p-6">
                <label class="flex items-center cursor-pointer">
                    <div class="material-toggle">
                        <input type="checkbox" id="mediumToggle" checked>
                        <span class="material-toggle-slider"></span>
                    </div>
                    <span class="ml-4 subtitle-1 font-medium text-neutral-700 dark:text-neutral-300">Medium Present</span>
                </label>
                <p class="caption text-neutral-500 dark:text-neutral-400 mt-2">Toggle to see how removing the medium affects wave propagation</p>
            </div>
        </div>
        
        <!-- Key Differences Section -->
        <div class="material-card bg-gradient-to-br from-primary-50 to-accent-50 dark:from-primary-900/20 dark:to-accent-900/20 rounded-xl shadow-material-2 p-8 mb-12">
            <h3 class="headline-5 text-primary-600 dark:text-primary-200 mb-6 flex items-center">
                <span class="material-icons text-accent-500 mr-3">compare</span>
                Key Differences
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div class="flex items-start space-x-3">
                        <div class="w-2 h-2 bg-accent-500 rounded-full mt-2 flex-shrink-0"></div>
                        <div>
                            <h4 class="subtitle-2 font-bold text-primary-700 dark:text-primary-200">Wave Type</h4>
                            <p class="body-2 text-neutral-600 dark:text-neutral-300">Light is transverse (oscillates perpendicular), while sound is longitudinal (oscillates parallel).</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-3">
                        <div class="w-2 h-2 bg-data-500 rounded-full mt-2 flex-shrink-0"></div>
                        <div>
                            <h4 class="subtitle-2 font-bold text-primary-700 dark:text-primary-200">Medium Requirement</h4>
                            <p class="body-2 text-neutral-600 dark:text-neutral-300">Sound needs a medium to propagate; light can travel through vacuum.</p>
                        </div>
                    </div>
                </div>
                <div class="space-y-4">
                    <div class="flex items-start space-x-3">
                        <div class="w-2 h-2 bg-premium-500 rounded-full mt-2 flex-shrink-0"></div>
                        <div>
                            <h4 class="subtitle-2 font-bold text-primary-700 dark:text-primary-200">Propagation Speed</h4>
                            <p class="body-2 text-neutral-600 dark:text-neutral-300">Light travels much faster than sound (~880,000× faster in vacuum).</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-3">
                        <div class="w-2 h-2 bg-accent-500 rounded-full mt-2 flex-shrink-0"></div>
                        <div>
                            <h4 class="subtitle-2 font-bold text-primary-700 dark:text-primary-200">Wavelength Range</h4>
                            <p class="body-2 text-neutral-600 dark:text-neutral-300">Light wavelengths are much shorter (380-750 nm) than sound (1.7 cm - 17 m).</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Learning Section -->
        <div class="material-card bg-neutral-25 dark:bg-neutral-800 rounded-xl shadow-material-2 p-8 mb-12">
            <h2 class="headline-5 text-primary-500 mb-6 flex items-center">
                <span class="material-icons text-accent-500 mr-3">school</span>
                Interactive Learning
            </h2>
            
            <!-- Learning Tabs -->
            <div class="flex border-b border-neutral-200 dark:border-neutral-700 mb-6">
                <button id="quizTab" class="learning-tab active px-6 py-3 subtitle-2 font-medium">
                    <span class="material-icons text-sm mr-2">quiz</span>Quiz
                </button>
                <button id="challengeTab" class="learning-tab px-6 py-3 subtitle-2 font-medium text-neutral-500 dark:text-neutral-400">
                    <span class="material-icons text-sm mr-2">flag</span>Challenges
                </button>
                <button id="formulaTab" class="learning-tab px-6 py-3 subtitle-2 font-medium text-neutral-500 dark:text-neutral-400">
                    <span class="material-icons text-sm mr-2">functions</span>Wave Formula
                </button>
            </div>
            
            <!-- Quiz Section -->
            <div id="quizSection" class="wave-info-card p-6">
                <div id="questionContainer" class="mb-6">
                    <h3 class="headline-6 text-primary-600 dark:text-primary-200 mb-4" id="questionText">Which type of wave requires a medium to propagate?</h3>
                    <div class="space-y-3">
                        <div class="flex items-center p-3 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors cursor-pointer">
                            <input type="radio" id="option1" name="question" value="light" class="mr-3 w-4 h-4 text-accent-500">
                            <label for="option1" class="body-1 cursor-pointer">Light waves</label>
                        </div>
                        <div class="flex items-center p-3 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors cursor-pointer">
                            <input type="radio" id="option2" name="question" value="sound" class="mr-3 w-4 h-4 text-accent-500">
                            <label for="option2" class="body-1 cursor-pointer">Sound waves</label>
                        </div>
                        <div class="flex items-center p-3 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors cursor-pointer">
                            <input type="radio" id="option3" name="question" value="both" class="mr-3 w-4 h-4 text-accent-500">
                            <label for="option3" class="body-1 cursor-pointer">Both light and sound waves</label>
                        </div>
                        <div class="flex items-center p-3 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors cursor-pointer">
                            <input type="radio" id="option4" name="question" value="neither" class="mr-3 w-4 h-4 text-accent-500">
                            <label for="option4" class="body-1 cursor-pointer">Neither light nor sound waves</label>
                        </div>
                    </div>
                </div>
                <div id="feedbackContainer" class="mb-6 p-4 rounded-lg hidden"></div>
                <div class="flex space-x-3">
                    <button id="submitAnswer" class="btn-primary material-button ripple">
                        <span class="button-text">Submit Answer</span>
                    </button>
                    <button id="nextQuestion" class="btn-primary material-button ripple hidden">
                        <span class="button-text">Next Question</span>
                    </button>
                </div>
            </div>
            
            <!-- Challenges Section -->
            <div id="challengeSection" class="wave-info-card p-6 hidden">
                <h3 class="headline-6 text-primary-600 dark:text-primary-200 mb-4">Interactive Challenges</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div id="challenge1" class="bg-gradient-to-br from-data-50 to-data-100 dark:from-data-900/20 dark:to-data-800/20 p-4 rounded-xl">
                        <h4 class="subtitle-1 font-bold text-data-700 dark:text-data-200 mb-2">No Medium Challenge</h4>
                        <p class="body-2 text-neutral-600 dark:text-neutral-300 mb-3">Turn off the medium and observe what happens to sound wave propagation.</p>
                        <button class="challenge-button btn-secondary w-full" data-challenge="1">
                            Start Challenge
                        </button>
                    </div>
                    <div id="challenge2" class="bg-gradient-to-br from-accent-50 to-accent-100 dark:from-accent-900/20 dark:to-accent-800/20 p-4 rounded-xl">
                        <h4 class="subtitle-1 font-bold text-accent-700 dark:text-accent-200 mb-2">Speed Comparison</h4>
                        <p class="body-2 text-neutral-600 dark:text-neutral-300 mb-3">Adjust the speed of both waves to match real-world propagation speeds.</p>
                        <button class="challenge-button btn-secondary w-full" data-challenge="2">
                            Start Challenge
                        </button>
                    </div>
                    <div id="challenge3" class="bg-gradient-to-br from-premium-50 to-premium-100 dark:from-premium-900/20 dark:to-premium-800/20 p-4 rounded-xl">
                        <h4 class="subtitle-1 font-bold text-premium-700 dark:text-premium-200 mb-2">Match Frequency</h4>
                        <p class="body-2 text-neutral-600 dark:text-neutral-300 mb-3">Adjust both waves to create the same frequency using the wave formula.</p>
                        <button class="challenge-button btn-secondary w-full" data-challenge="3">
                            Start Challenge
                        </button>
                    </div>
                </div>
                <div id="challengeFeedback" class="mt-6 p-4 rounded-xl hidden"></div>
            </div>
            
            <!-- Wave Formula Section -->
            <div id="formulaSection" class="wave-info-card p-6 hidden">
                <h3 class="headline-6 text-primary-600 dark:text-primary-200 mb-4">Wave Formula: v = f × λ</h3>
                <div class="bg-gradient-to-r from-primary-100 to-accent-100 dark:from-primary-900/30 dark:to-accent-900/30 p-6 rounded-xl mb-6">
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="headline-5 text-primary-600 dark:text-primary-200 font-bold">v</div>
                            <div class="caption text-neutral-600 dark:text-neutral-300">Wave Speed</div>
                        </div>
                        <div>
                            <div class="headline-5 text-accent-600 dark:text-accent-200 font-bold">f</div>
                            <div class="caption text-neutral-600 dark:text-neutral-300">Frequency</div>
                        </div>
                        <div>
                            <div class="headline-5 text-data-600 dark:text-data-200 font-bold">λ</div>
                            <div class="caption text-neutral-600 dark:text-neutral-300">Wavelength</div>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="subtitle-1 font-bold text-neutral-700 dark:text-neutral-300 mb-3">Formula Relationships</h4>
                        <ul class="space-y-2">
                            <li class="flex items-center body-2 text-neutral-600 dark:text-neutral-300">
                                <span class="material-icons text-accent-500 mr-2 text-sm">trending_up</span>
                                Increase wavelength → Decrease frequency (if speed constant)
                            </li>
                            <li class="flex items-center body-2 text-neutral-600 dark:text-neutral-300">
                                <span class="material-icons text-accent-500 mr-2 text-sm">trending_up</span>
                                Increase speed → Increase frequency (if wavelength constant)
                            </li>
                        </ul>
                    </div>
                    
                    <div class="bg-neutral-100 dark:bg-neutral-700 p-4 rounded-xl">
                        <h4 class="subtitle-1 font-bold text-neutral-700 dark:text-neutral-300 mb-3">Calculator</h4>
                        <div class="grid grid-cols-3 gap-2 mb-3">
                            <div>
                                <label class="caption text-neutral-600 dark:text-neutral-400">Speed (v)</label>
                                <input type="number" id="calcSpeed" class="material-input w-full p-2 text-sm" value="5">
                            </div>
                            <div>
                                <label class="caption text-neutral-600 dark:text-neutral-400">Frequency (f)</label>
                                <input type="number" id="calcFreq" class="material-input w-full p-2 text-sm" value="0.8">
                            </div>
                            <div>
                                <label class="caption text-neutral-600 dark:text-neutral-400">Wavelength (λ)</label>
                                <input type="number" id="calcWavelength" class="material-input w-full p-2 text-sm" value="6.25">
                            </div>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            <button id="calcSpeed_btn" class="btn-secondary text-xs px-3 py-1">Calc v</button>
                            <button id="calcFreq_btn" class="btn-secondary text-xs px-3 py-1">Calc f</button>
                            <button id="calcWL_btn" class="btn-secondary text-xs px-3 py-1">Calc λ</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modal for more info -->
        <div id="infoModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden backdrop-blur-sm">
            <div class="material-card bg-neutral-25 dark:bg-neutral-800 max-w-2xl w-11/12 rounded-2xl shadow-material-5 p-8 max-h-[80vh] overflow-y-auto">
                <div class="flex justify-between items-start mb-6">
                    <h3 class="headline-5 text-primary-600 dark:text-primary-200" id="modalTitle">Wave Properties</h3>
                    <button id="closeModal" class="material-fab w-10 h-10 bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600">
                        <span class="material-icons">close</span>
                    </button>
                </div>
                <div id="modalContent" class="space-y-4 body-1 text-neutral-700 dark:text-neutral-300">
                    <!-- Content will be inserted dynamically -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Animation variables
        const FPS = 60;
        const FRAME_INTERVAL = 1000 / FPS;
        
        // Wave parameters
        let lightWavelength = 100;
        let soundWavelength = 100;
        let lightAmplitude = 40;
        let soundAmplitude = 20;
        let lightSpeed = 5;
        let soundSpeed = 1;
        let mediumPresent = true;
        
        // Light wave color
        let lightColor = '#00ff00'; // Default green
        
        // Measurement tools
        let lightMeasuring = false;
        let soundMeasuring = false;
        let lightMeasureStart = null;
        let lightMeasureEnd = null;
        let soundMeasureStart = null;
        let soundMeasureEnd = null;
        
        // Time tracking
        let lastTimestamp = 0;
        let elapsed = 0;
        let isPaused = false;
        
        // Canvas setup
        const lightCanvas = document.getElementById('lightCanvas');
        const soundCanvas = document.getElementById('soundCanvas');
        const waveformCanvas = document.getElementById('waveformCanvas');
        const lightCtx = lightCanvas.getContext('2d');
        const soundCtx = soundCanvas.getContext('2d');
        const waveformCtx = waveformCanvas.getContext('2d');
        
        // Controls
        const lightSpeedRange = document.getElementById('lightSpeedRange');
        const soundSpeedRange = document.getElementById('soundSpeedRange');
        const lightAmplitudeRange = document.getElementById('lightAmplitudeRange');
        const audioVolumeRange = document.getElementById('audioVolumeRange');
        const mediumToggle = document.getElementById('mediumToggle');
        
        // Value displays
        const lightSpeedValue = document.getElementById('lightSpeedValue');
        const soundSpeedValue = document.getElementById('soundSpeedValue');
        const lightAmplitudeValue = document.getElementById('lightAmplitudeValue');
        const audioVolumeValue = document.getElementById('audioVolumeValue');
        const lightFreqValue = document.getElementById('lightFreqValue');
        const soundFreqValue = document.getElementById('soundFreqValue');
        
        // Audio controls
        const audioFrequencyRange = document.getElementById('audioFrequencyRange');
        const audioFrequencyValue = document.getElementById('audioFrequencyValue');
        const audioWaveformSelect = document.getElementById('audioWaveformSelect');
        const audioPlayButton = document.getElementById('audioPlayButton');
        const musicalNoteDisplay = document.getElementById('musicalNoteDisplay');
        const noAudioMessage = document.getElementById('noAudioMessage');
        
        // Light controls
        const lightColorRange = document.getElementById('lightColorRange');
        const lightColorWavelength = document.getElementById('lightColorWavelength');
        const lightColorName = document.getElementById('lightColorName');
        const currentColorDisplay = document.getElementById('currentColorDisplay');
        const wavelengthIndicator = document.getElementById('wavelengthIndicator');
        
        // Measurement tools
        const lightMeasureToggle = document.getElementById('lightMeasureToggle');
        const soundMeasureToggle = document.getElementById('soundMeasureToggle');
        
        // Info buttons & modal
        const lightInfoButton = document.getElementById('lightInfoButton');
        const soundInfoButton = document.getElementById('soundInfoButton');
        const infoModal = document.getElementById('infoModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalContent = document.getElementById('modalContent');
        const closeModal = document.getElementById('closeModal');
        
        // Learning tabs and sections
        const quizTab = document.getElementById('quizTab');
        const challengeTab = document.getElementById('challengeTab');
        const formulaTab = document.getElementById('formulaTab');
        const quizSection = document.getElementById('quizSection');
        const challengeSection = document.getElementById('challengeSection');
        const formulaSection = document.getElementById('formulaSection');
        
        // Quiz elements
        const questionText = document.getElementById('questionText');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const submitAnswer = document.getElementById('submitAnswer');
        const nextQuestion = document.getElementById('nextQuestion');
        
        // Challenge elements
        const challengeButtons = document.querySelectorAll('.challenge-button');
        const challengeFeedback = document.getElementById('challengeFeedback');
        
        // Calculator elements
        const calcSpeed = document.getElementById('calcSpeed');
        const calcFreq = document.getElementById('calcFreq');
        const calcWavelength = document.getElementById('calcWavelength');
        const calcSpeed_btn = document.getElementById('calcSpeed_btn');
        const calcFreq_btn = document.getElementById('calcFreq_btn');
        const calcWL_btn = document.getElementById('calcWL_btn');
        
        // Audio Context setup
        let audioContext;
        let oscillator;
        let gainNode;
        let analyser;
        let dataArray;
        let isPlaying = false;

        // Try to initialize AudioContext (may fail in some browsers)
        try {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Create gain node for volume control
            gainNode = audioContext.createGain();
            gainNode.gain.value = 0.5; // Initial volume 50%
            gainNode.connect(audioContext.destination);
            
            // Create analyser node for visualization
            analyser = audioContext.createAnalyser();
            analyser.fftSize = 2048;
            analyser.connect(gainNode);
            
            const bufferLength = analyser.frequencyBinCount;
            dataArray = new Uint8Array(bufferLength);
        } catch (e) {
            console.error("Web Audio API is not supported in this browser");
            noAudioMessage.classList.remove('hidden');
        }
        
        // Set canvas dimensions based on container
        function resizeCanvases() {
            const resizeCanvas = (canvas, container = null) => {
                const cont = container || canvas.parentElement;
                canvas.width = cont.clientWidth;
                canvas.height = cont.clientHeight;
            };
            
            resizeCanvas(lightCanvas);
            resizeCanvas(soundCanvas);
            resizeCanvas(waveformCanvas);
        }
        
        // Initialize canvases
        resizeCanvases();
        window.addEventListener('resize', resizeCanvases);
        
        // Update frequency display
        function updateLightFrequencyDisplay() {
            // Calculate frequency: f = v/λ
            const lightFreq = (lightSpeed * 2) / (lightWavelength / 10);
            lightFreqValue.textContent = lightFreq.toFixed(2);
        }
        
        function updateSoundFrequencyDisplay() {
            // Calculate frequency based on wavelength and speed
            const soundFreq = soundSpeed ? (soundSpeed * 2) / (soundWavelength / 10) : 0;
            soundFreqValue.textContent = soundFreq.toFixed(2);
        }
        
        // Convert light wavelength to simulation wavelength
        function convertLightWavelength(nmWavelength) {
            // Map 400-700nm range to 50-200px range for visualization
            return 50 + ((nmWavelength - 400) / 300) * 150;
        }
        
        // Convert audio frequency to simulation wavelength
        function convertAudioFrequency(frequency) {
            // The higher the frequency, the shorter the wavelength
            // Map 20-1000Hz range to 200-50px range for visualization
            return 200 - ((frequency - 20) / 980) * 150;
        }
        
        // Convert volume percentage to amplitude for visualization
        function convertVolumeToAmplitude(volumePercent) {
            // Map 0-100% to 5-40px for visualization
            return 5 + (volumePercent / 100) * 35;
        }
        
        // Event listeners for wave parameter controls
        lightSpeedRange.addEventListener('input', (e) => {
            lightSpeed = parseInt(e.target.value);
            lightSpeedValue.textContent = lightSpeed;
            updateLightFrequencyDisplay();
        });
        
        soundSpeedRange.addEventListener('input', (e) => {
            soundSpeed = parseInt(e.target.value);
            soundSpeedValue.textContent = soundSpeed;
            updateSoundFrequencyDisplay();
        });
        
        lightAmplitudeRange.addEventListener('input', (e) => {
            lightAmplitude = parseInt(e.target.value);
            lightAmplitudeValue.textContent = lightAmplitude;
        });
        
        // Connect light color/wavelength to wave visualization
        lightColorRange.addEventListener('input', () => {
            const wavelengthNm = parseInt(lightColorRange.value);
            
            // Update display values
            lightColorWavelength.textContent = wavelengthNm;
            
            // Update simulation wavelength
            lightWavelength = convertLightWavelength(wavelengthNm);
            
            // Update color display
            updateLightColor(wavelengthNm);
            
            // Update frequency display
            updateLightFrequencyDisplay();
        });
        
        // Connect audio frequency to wave visualization
        audioFrequencyRange.addEventListener('input', () => {
            const frequency = parseInt(audioFrequencyRange.value);
            
            // Update display values
            audioFrequencyValue.textContent = frequency;
            updateMusicalNote(frequency);
            
            // Update simulation wavelength based on frequency
            soundWavelength = convertAudioFrequency(frequency);
            
            // Update frequency display
            updateSoundFrequencyDisplay();
            
            // Update oscillator frequency if playing
            if (isPlaying && oscillator) {
                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            }
        });
        
        // Connect volume slider to amplitude visualization
        audioVolumeRange.addEventListener('input', () => {
            const volume = parseInt(audioVolumeRange.value);
            audioVolumeValue.textContent = `${volume}%`;
            
            // Update sound amplitude based on volume
            soundAmplitude = convertVolumeToAmplitude(volume);
            
            // Update gain node if audio is initialized
            if (gainNode) {
                gainNode.gain.setValueAtTime(volume / 100, audioContext.currentTime);
            }
        });
        
        mediumToggle.addEventListener('change', (e) => {
            mediumPresent = e.target.checked;
            
            // If medium is removed, sound cannot propagate
            if (!mediumPresent) {
                soundSpeedRange.value = 0;
                soundSpeed = 0;
                soundSpeedValue.textContent = 0;
                soundSpeedRange.disabled = true;
                updateSoundFrequencyDisplay();
                
                // Stop audio if playing in a vacuum
                if (isPlaying) {
                    toggleAudio();
                }
            } else {
                soundSpeedRange.value = 1;
                soundSpeed = 1;
                soundSpeedValue.textContent = 1;
                soundSpeedRange.disabled = false;
                updateSoundFrequencyDisplay();
            }
        });
        
        // Update waveform when selection changes
        audioWaveformSelect.addEventListener('change', () => {
            if (isPlaying && oscillator) {
                oscillator.type = audioWaveformSelect.value;
            }
        });
        
        // Measurement tool controls
        lightMeasureToggle.addEventListener('click', () => {
            lightMeasuring = !lightMeasuring;
            lightMeasureToggle.textContent = lightMeasuring ? 'Cancel' : 'Measure';
            lightMeasureToggle.classList.toggle('!bg-error', lightMeasuring);
            lightMeasureToggle.classList.toggle('!text-white', lightMeasuring);
            lightMeasureStart = null;
            lightMeasureEnd = null;
        });
        
        soundMeasureToggle.addEventListener('click', () => {
            soundMeasuring = !soundMeasuring;
            soundMeasureToggle.textContent = soundMeasuring ? 'Cancel' : 'Measure';
            soundMeasureToggle.classList.toggle('!bg-error', soundMeasuring);
            soundMeasureToggle.classList.toggle('!text-white', soundMeasuring);
            soundMeasureStart = null;
            soundMeasureEnd = null;
        });
        
        // Canvas click handlers for measurements
        lightCanvas.addEventListener('click', (e) => {
            if (!lightMeasuring) return;
            
            const rect = lightCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            if (!lightMeasureStart) {
                lightMeasureStart = { x, y };
            } else if (!lightMeasureEnd) {
                lightMeasureEnd = { x, y };
            } else {
                lightMeasureStart = { x, y };
                lightMeasureEnd = null;
            }
        });
        
        soundCanvas.addEventListener('click', (e) => {
            if (!soundMeasuring) return;
            
            const rect = soundCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            if (!soundMeasureStart) {
                soundMeasureStart = { x, y };
            } else if (!soundMeasureEnd) {
                soundMeasureEnd = { x, y };
            } else {
                soundMeasureStart = { x, y };
                soundMeasureEnd = null;
            }
        });
        
        // Update light color based on wavelength
        function updateLightColor(wavelength) {
            // Calculate position for the wavelength indicator (400-700nm)
            const percent = ((wavelength - 400) / 300) * 100;
            wavelengthIndicator.style.left = `${percent}%`;
            
            // Get color and name based on wavelength
            const [color, name] = wavelengthToColor(wavelength);
            currentColorDisplay.style.backgroundColor = color;
            lightColorName.textContent = name;
            
            // Set the color for the wave visualization
            lightColor = color;
        }
        
        // Convert wavelength to RGB color
        function wavelengthToColor(wavelength) {
            let r, g, b, name;
            
            if (wavelength >= 380 && wavelength < 440) {
                r = -1 * (wavelength - 440) / (440 - 380);
                g = 0;
                b = 1;
                name = "Violet";
            } else if (wavelength >= 440 && wavelength < 490) {
                r = 0;
                g = (wavelength - 440) / (490 - 440);
                b = 1;
                name = "Blue";
            } else if (wavelength >= 490 && wavelength < 510) {
                r = 0;
                g = 1;
                b = -1 * (wavelength - 510) / (510 - 490);
                name = "Cyan";
            } else if (wavelength >= 510 && wavelength < 580) {
                r = (wavelength - 510) / (580 - 510);
                g = 1;
                b = 0;
                name = "Green";
            } else if (wavelength >= 580 && wavelength < 645) {
                r = 1;
                g = -1 * (wavelength - 645) / (645 - 580);
                b = 0;
                name = wavelength < 600 ? "Yellow" : "Orange";
            } else if (wavelength >= 645 && wavelength <= 780) {
                r = 1;
                g = 0;
                b = 0;
                name = "Red";
            } else {
                r = 0;
                g = 0;
                b = 0;
                name = "Not visible";
            }
            
            // Intensity factor
            let factor = 1;
            if (wavelength > 700 || wavelength < 420) {
                factor = 0.3;
            } else if (wavelength > 650 || wavelength < 450) {
                factor = 0.7;
            }
            
            r = Math.round(255 * (r * factor));
            g = Math.round(255 * (g * factor));
            b = Math.round(255 * (b * factor));
            
            return [`rgb(${r}, ${g}, ${b})`, name];
        }
        
        // Audio playback controls
        audioPlayButton.addEventListener('click', toggleAudio);
        
        function toggleAudio() {
            if (!audioContext) return;
            
            // If the medium is not present, we shouldn't be able to play sound
            if (!mediumPresent) {
                showModal('No Medium Present', 
                    `<p>Sound cannot propagate without a medium! Turn on the medium toggle to enable sound.</p>
                    <p class="mt-3">This demonstrates an important difference between light and sound waves: sound requires a medium to travel through, while light does not.</p>`
                );
                return;
            }
            
            if (isPlaying) {
                // Stop playing
                if (oscillator) {
                    oscillator.stop();
                    oscillator.disconnect();
                    oscillator = null;
                }
                
                audioPlayButton.innerHTML = `
                    <span class="material-icons mr-2">play_arrow</span>
                    <span class="button-text">Play</span>
                `;
                isPlaying = false;
            } else {
                // Resume suspended audio context if needed
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                
                // Create and configure oscillator
                oscillator = audioContext.createOscillator();
                oscillator.type = audioWaveformSelect.value;
                oscillator.frequency.setValueAtTime(
                    parseInt(audioFrequencyRange.value), 
                    audioContext.currentTime
                );
                
                // Connect through analyser for visualization
                oscillator.connect(analyser);
                
                // Start oscillator
                oscillator.start();
                
                audioPlayButton.innerHTML = `
                    <span class="material-icons mr-2">stop</span>
                    <span class="button-text">Stop</span>
                `;
                isPlaying = true;
            }
        }
        
        // Update musical note display based on frequency
        function updateMusicalNote(frequency) {
            // Map frequency to closest musical note
            const noteNames = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
            const A4 = 440; // A4 reference frequency in Hz
            
            // Calculate how many half steps away from A4
            const halfSteps = Math.round(12 * Math.log2(frequency / A4));
            
            // Calculate octave and note index
            let octave = 4 + Math.floor((halfSteps + 9) / 12);
            let noteIndex = (halfSteps + 9) % 12;
            if (noteIndex < 0) {
                noteIndex += 12;
            }
            
            if (frequency < 20) {
                musicalNoteDisplay.textContent = `${frequency} Hz (Below human hearing)`;
            } else if (frequency > 20000) {
                musicalNoteDisplay.textContent = `${frequency} Hz (Above human hearing)`;
            } else {
                musicalNoteDisplay.textContent = `${noteNames[noteIndex]}${octave} (${frequency} Hz)`;
            }
        }
        
        // Draw waveform visualization
        function drawWaveform() {
            const width = waveformCanvas.width;
            const height = waveformCanvas.height;
            
            // Clear canvas
            waveformCtx.clearRect(0, 0, width, height);
            
            if (!isPlaying || !analyser) return;
            
            analyser.getByteTimeDomainData(dataArray);
            
            // Set line style
            const isDark = document.documentElement.classList.contains('dark');
            waveformCtx.strokeStyle = '#009F9D';
            waveformCtx.lineWidth = 2;
            
            // Draw waveform
            waveformCtx.beginPath();
            
            const sliceWidth = width / dataArray.length;
            let x = 0;
            
            for (let i = 0; i < dataArray.length; i++) {
                const v = dataArray[i] / 128.0;
                const y = (v * height) / 2;
                
                if (i === 0) {
                    waveformCtx.moveTo(x, y);
                } else {
                    waveformCtx.lineTo(x, y);
                }
                
                x += sliceWidth;
            }
            
            waveformCtx.stroke();
        }
        
        // Info modal handlers
        function showModal(title, content) {
            modalTitle.textContent = title;
            modalContent.innerHTML = content;
            infoModal.classList.remove('hidden');
        }
        
        closeModal.addEventListener('click', () => {
            infoModal.classList.add('hidden');
        });
        
        lightInfoButton.addEventListener('click', () => {
            showModal('Light Waves', `
                <p>Light waves are <strong>electromagnetic waves</strong> that exhibit transverse wave properties:</p>
                <ul class="list-disc pl-5 space-y-2 my-3">
                    <li><strong>Transverse:</strong> The oscillation is perpendicular to the direction of travel.</li>
                    <li><strong>No Medium Required:</strong> Light can travel through a vacuum, unlike sound waves.</li>
                    <li><strong>Speed in Vacuum:</strong> 299,792,458 meters per second (approximately 3×10<sup>8</sup> m/s).</li>
                    <li><strong>Visible Spectrum:</strong> Wavelengths between 380-750 nanometers.</li>
                </ul>
                <p class="mt-3">The color of visible light depends on its wavelength:</p>
                <div class="grid grid-cols-7 gap-1 mt-2 text-white text-center text-xs">
                    <div class="bg-violet-600 p-1 rounded">Violet<br>~400nm</div>
                    <div class="bg-indigo-600 p-1 rounded">Indigo<br>~450nm</div>
                    <div class="bg-blue-600 p-1 rounded">Blue<br>~475nm</div>
                    <div class="bg-green-600 p-1 rounded">Green<br>~510nm</div>
                    <div class="bg-yellow-500 p-1 rounded">Yellow<br>~570nm</div>
                    <div class="bg-orange-500 p-1 rounded">Orange<br>~590nm</div>
                    <div class="bg-red-600 p-1 rounded">Red<br>~650nm</div>
                </div>
                <p class="mt-3"><strong>Interesting fact:</strong> Light has both wave-like and particle-like properties, a concept known as "wave-particle duality."</p>
            `);
        });
        
        soundInfoButton.addEventListener('click', () => {
            showModal('Sound Waves', `
                <p>Sound waves are <strong>mechanical waves</strong> that exhibit longitudinal wave properties:</p>
                <ul class="list-disc pl-5 space-y-2 my-3">
                    <li><strong>Longitudinal:</strong> Particles oscillate parallel to the direction of travel, creating areas of compression and rarefaction.</li>
                    <li><strong>Medium Required:</strong> Sound needs a medium (like air, water, or solids) to propagate.</li>
                    <li><strong>Speed in Air:</strong> Approximately 343 meters per second at 20°C.</li>
                    <li><strong>Audible Range:</strong> Frequencies between 20 Hz and 20,000 Hz for humans.</li>
                </ul>
                <p class="mt-3">Sound travels at different speeds through different media:</p>
                <table class="w-full mt-2 border-collapse">
                    <tr class="bg-gray-100 dark:bg-gray-700">
                        <th class="border p-1">Medium</th>
                        <th class="border p-1">Speed (m/s)</th>
                    </tr>
                    <tr>
                        <td class="border p-1">Air (20°C)</td>
                        <td class="border p-1">343</td>
                    </tr>
                    <tr>
                        <td class="border p-1">Water</td>
                        <td class="border p-1">1,481</td>
                    </tr>
                    <tr>
                        <td class="border p-1">Steel</td>
                        <td class="border p-1">5,960</td>
                    </tr>
                </table>
                <p class="mt-3"><strong>Interesting fact:</strong> The pitch of a sound is determined by its frequency, while the loudness is related to its amplitude.</p>
                <p class="mt-3">Different waveforms produce different sound qualities:</p>
                <ul class="list-disc pl-5 space-y-1 my-2">
                    <li><strong>Sine wave:</strong> Pure tone with no harmonics (flute-like)</li>
                    <li><strong>Square wave:</strong> Rich in odd harmonics (electronic/8-bit sound)</li>
                    <li><strong>Sawtooth wave:</strong> Rich in both odd and even harmonics (buzzy/bright)</li>
                    <li><strong>Triangle wave:</strong> Has odd harmonics but quieter than square (softer than sawtooth)</li>
                </ul>
            `);
        });
        
        // Draw light wave (transverse)
        function drawLightWave(timestamp) {
            const width = lightCanvas.width;
            const height = lightCanvas.height;
            const centerY = height / 2;
            
            // Clear canvas
            lightCtx.clearRect(0, 0, width, height);
            
            // Set wave color based on selected light color
            lightCtx.strokeStyle = lightColor;
            lightCtx.lineWidth = 3;
            
            // Draw wave
            lightCtx.beginPath();
            
            for (let x = 0; x < width; x++) {
                const time = elapsed * 0.001;
                const y = centerY + lightAmplitude * Math.sin((x / lightWavelength) * 2 * Math.PI - lightSpeed * time * 2);
                
                if (x === 0) {
                    lightCtx.moveTo(x, y);
                } else {
                    lightCtx.lineTo(x, y);
                }
            }
            
            lightCtx.stroke();
            
            // Draw measurement markers
            if (lightMeasureStart) {
                lightCtx.fillStyle = '#ef4444';
                lightCtx.beginPath();
                lightCtx.arc(lightMeasureStart.x, lightMeasureStart.y, 5, 0, 2 * Math.PI);
                lightCtx.fill();
                
                if (lightMeasureEnd) {
                    lightCtx.fillStyle = '#3b82f6';
                    lightCtx.beginPath();
                    lightCtx.arc(lightMeasureEnd.x, lightMeasureEnd.y, 5, 0, 2 * Math.PI);
                    lightCtx.fill();
                    
                    // Draw connecting line
                    lightCtx.strokeStyle = '#009F9D';
                    lightCtx.lineWidth = 2;
                    lightCtx.setLineDash([5, 3]);
                    lightCtx.beginPath();
                    lightCtx.moveTo(lightMeasureStart.x, lightMeasureStart.y);
                    lightCtx.lineTo(lightMeasureEnd.x, lightMeasureEnd.y);
                    lightCtx.stroke();
                    lightCtx.setLineDash([]);
                    
                    // Display measurement
                    const distance = Math.sqrt(
                        Math.pow(lightMeasureEnd.x - lightMeasureStart.x, 2) + 
                        Math.pow(lightMeasureEnd.y - lightMeasureStart.y, 2)
                    );
                    const midX = (lightMeasureStart.x + lightMeasureEnd.x) / 2;
                    const midY = (lightMeasureStart.y + lightMeasureEnd.y) / 2;
                    
                    lightCtx.fillStyle = '#ffffff';
                    lightCtx.font = 'bold 12px Roboto';
                    lightCtx.fillText(`${distance.toFixed(1)} px`, midX + 10, midY - 10);
                }
            }
            
            // Draw direction arrow
            lightCtx.fillStyle = lightColor;
            lightCtx.beginPath();
            lightCtx.moveTo(width - 30, centerY - 10);
            lightCtx.lineTo(width - 10, centerY);
            lightCtx.lineTo(width - 30, centerY + 10);
            lightCtx.fill();
            
            // Draw axes labels
            const isDark = document.documentElement.classList.contains('dark');
            lightCtx.fillStyle = isDark ? '#F9FAFB' : '#1F2937';
            lightCtx.font = '12px Roboto';
            lightCtx.fillText('Position →', width - 80, height - 10);
            lightCtx.save();
            lightCtx.translate(15, height / 2 - 50);
            lightCtx.rotate(-Math.PI / 2);
            lightCtx.fillText('Amplitude', 0, 0);
            lightCtx.restore();
        }
        
        // Draw sound wave (longitudinal)
        function drawSoundWave(timestamp) {
            const width = soundCanvas.width;
            const height = soundCanvas.height;
            const centerY = height / 2;
            
            // Clear canvas
            soundCtx.clearRect(0, 0, width, height);
            
            // Set wave colors
            const isDark = document.documentElement.classList.contains('dark');
            soundCtx.fillStyle = '#5A7B9E';
            soundCtx.strokeStyle = isDark ? '#9AA0A6' : '#BDC1C6';
            soundCtx.lineWidth = 1;
            
            // Draw particles (longitudinal wave)
            const particleCount = 40;
            const particleSpacing = width / particleCount;
            const particleRadius = 5;
            const time = elapsed * 0.001;
            
            // Draw horizontal center line
            soundCtx.beginPath();
            soundCtx.moveTo(0, centerY);
            soundCtx.lineTo(width, centerY);
            soundCtx.stroke();
            
            // Draw particles
            for (let i = 0; i < particleCount; i++) {
                const baseX = i * particleSpacing;
                
                // Only move particles if medium is present
                let displacement = 0;
                if (mediumPresent) {
                    displacement = soundAmplitude * Math.sin((baseX / soundWavelength) * 2 * Math.PI - soundSpeed * time * 2);
                }
                
                const x = baseX + displacement;
                
                // Skip particles that would go outside the canvas
                if (x >= 0 && x <= width) {
                    soundCtx.beginPath();
                    soundCtx.arc(x, centerY, particleRadius, 0, 2 * Math.PI);
                    soundCtx.fill();
                    
                    // Draw particle displacement lines
                    if (displacement !== 0) {
                        soundCtx.beginPath();
                        soundCtx.moveTo(baseX, centerY);
                        soundCtx.lineTo(x, centerY);
                        soundCtx.stroke();
                    }
                }
            }
            
            // Draw measurement markers
            if (soundMeasureStart) {
                soundCtx.fillStyle = '#ef4444';
                soundCtx.beginPath();
                soundCtx.arc(soundMeasureStart.x, soundMeasureStart.y, 5, 0, 2 * Math.PI);
                soundCtx.fill();
                
                if (soundMeasureEnd) {
                    soundCtx.fillStyle = '#3b82f6';
                    soundCtx.beginPath();
                    soundCtx.arc(soundMeasureEnd.x, soundMeasureEnd.y, 5, 0, 2 * Math.PI);
                    soundCtx.fill();
                    
                    // Draw connecting line
                    soundCtx.strokeStyle = '#009F9D';
                    soundCtx.lineWidth = 2;
                    soundCtx.setLineDash([5, 3]);
                    soundCtx.beginPath();
                    soundCtx.moveTo(soundMeasureStart.x, soundMeasureStart.y);
                    soundCtx.lineTo(soundMeasureEnd.x, soundMeasureEnd.y);
                    soundCtx.stroke();
                    soundCtx.setLineDash([]);
                    
                    // Display measurement
                    const distance = Math.sqrt(
                        Math.pow(soundMeasureEnd.x - soundMeasureStart.x, 2) + 
                        Math.pow(soundMeasureEnd.y - soundMeasureStart.y, 2)
                    );
                    const midX = (soundMeasureStart.x + soundMeasureEnd.x) / 2;
                    const midY = (soundMeasureStart.y + soundMeasureEnd.y) / 2;
                    
                    soundCtx.fillStyle = isDark ? '#F9FAFB' : '#1F2937';
                    soundCtx.font = 'bold 12px Roboto';
                    soundCtx.fillText(`${distance.toFixed(1)} px`, midX + 10, midY - 10);
                }
            }
            
            // Draw direction arrow
            soundCtx.fillStyle = '#5A7B9E';
            soundCtx.beginPath();
            soundCtx.moveTo(width - 30, centerY - 10);
            soundCtx.lineTo(width - 10, centerY);
            soundCtx.lineTo(width - 30, centerY + 10);
            soundCtx.fill();
            
            // Draw axes labels
            soundCtx.fillStyle = isDark ? '#F9FAFB' : '#1F2937';
            soundCtx.font = '12px Roboto';
            soundCtx.fillText('Position →', width - 80, height - 10);
            soundCtx.fillText('← Compression | Rarefaction →', 10, 20);
        }
        
        // Animation loop
        function animate(timestamp) {
            // Calculate elapsed time
            if (!lastTimestamp) {
                lastTimestamp = timestamp;
            }
            
            if (!isPaused) {
                const delta = timestamp - lastTimestamp;
                elapsed += delta;
            }
            
            lastTimestamp = timestamp;
            
            // Draw waves
            drawLightWave(timestamp);
            drawSoundWave(timestamp);
            drawWaveform();
            
            // Request next frame
            requestAnimationFrame(animate);
        }
        
        // Start animation
        requestAnimationFrame(animate);
        
        // Initialize values
        updateLightFrequencyDisplay();
        updateSoundFrequencyDisplay();
        updateLightColor(parseInt(lightColorRange.value));
        updateMusicalNote(parseInt(audioFrequencyRange.value));
        
        // Quiz functionality
        const questions = [
            {
                question: "Which type of wave requires a medium to propagate?",
                options: ["Light waves", "Sound waves", "Both light and sound waves", "Neither light nor sound waves"],
                answer: "option2",
                feedback: "Correct! Sound waves require a medium to propagate, while light waves can travel through a vacuum."
            },
            {
                question: "Light waves are _____ waves, while sound waves are _____ waves.",
                options: ["Transverse, longitudinal", "Longitudinal, transverse", "Transverse, transverse", "Longitudinal, longitudinal"],
                answer: "option1",
                feedback: "Correct! Light waves are transverse waves (oscillate perpendicular to direction of travel), while sound waves are longitudinal waves (oscillate parallel to direction of travel)."
            },
            {
                question: "If you increase wavelength while keeping speed constant, what happens to frequency?",
                options: ["Increases", "Decreases", "Stays the same", "Cannot be determined"],
                answer: "option2",
                feedback: "Correct! According to the wave equation (v = f × λ), if wavelength increases and speed remains constant, frequency must decrease."
            },
            {
                question: "Which travels faster in air?",
                options: ["Light", "Sound", "They travel at the same speed", "Depends on the frequency"],
                answer: "option1",
                feedback: "Correct! Light travels much faster than sound in air. Light travels at about 300,000 km/s, while sound travels at only about 343 m/s in air at room temperature."
            },
            {
                question: "What happens to sound waves in a vacuum?",
                options: ["They travel faster", "They travel slower", "They cannot propagate", "They change to light waves"],
                answer: "option3",
                feedback: "Correct! Sound waves cannot propagate in a vacuum because they require a medium for transmission. With no particles to vibrate, sound cannot travel."
            }
        ];
        
        let currentQuestion = 0;
        
        // Display current question
        function displayQuestion() {
            const q = questions[currentQuestion];
            questionText.textContent = q.question;
            
            // Set options
            for (let i = 0; i < 4; i++) {
                const option = document.getElementById(`option${i+1}`);
                const label = option.nextElementSibling;
                label.textContent = q.options[i];
                option.checked = false;
                option.value = `option${i+1}`;
            }
            
            // Reset state
            feedbackContainer.classList.add('hidden');
            submitAnswer.classList.remove('hidden');
            nextQuestion.classList.add('hidden');
        }
        
        // Submit answer handler
        submitAnswer.addEventListener('click', () => {
            const selectedOption = document.querySelector('input[name="question"]:checked');
            
            if (!selectedOption) {
                feedbackContainer.textContent = "Please select an answer.";
                feedbackContainer.className = "mb-6 p-4 rounded-lg bg-warning/20 text-warning border border-warning/30";
                feedbackContainer.classList.remove('hidden');
                return;
            }
            
            const q = questions[currentQuestion];
            const isCorrect = selectedOption.value === q.answer;
            
            feedbackContainer.textContent = isCorrect ? q.feedback : "Incorrect. Try again or click 'Next Question'.";
            feedbackContainer.className = `mb-6 p-4 rounded-lg ${isCorrect ? 
                'bg-success/20 text-success border border-success/30' : 
                'bg-error/20 text-error border border-error/30'}`;
            feedbackContainer.classList.remove('hidden');
            
            if (isCorrect) {
                submitAnswer.classList.add('hidden');
                nextQuestion.classList.remove('hidden');
            }
        });
        
        // Next question handler
        nextQuestion.addEventListener('click', () => {
            currentQuestion = (currentQuestion + 1) % questions.length;
            displayQuestion();
        });
        
        // Tab functionality
        function switchTab(activeTab, activeSection) {
            // Reset all tabs
            [quizTab, challengeTab, formulaTab].forEach(tab => {
                tab.classList.remove('active');
                tab.classList.add('text-neutral-500', 'dark:text-neutral-400');
            });
            
            // Activate selected tab
            activeTab.classList.add('active');
            activeTab.classList.remove('text-neutral-500', 'dark:text-neutral-400');
            
            // Hide all sections
            [quizSection, challengeSection, formulaSection].forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show active section
            activeSection.classList.remove('hidden');
        }
        
        quizTab.addEventListener('click', () => switchTab(quizTab, quizSection));
        challengeTab.addEventListener('click', () => switchTab(challengeTab, challengeSection));
        formulaTab.addEventListener('click', () => switchTab(formulaTab, formulaSection));
        
        // Challenge functionality
        challengeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const challengeId = button.getAttribute('data-challenge');
                
                if (challengeId === '1') {
                    // No Medium Sound challenge
                    mediumToggle.checked = false;
                    mediumPresent = false;
                    soundSpeedRange.value = 0;
                    soundSpeed = 0;
                    soundSpeedValue.textContent = 0;
                    soundSpeedRange.disabled = true;
                    updateSoundFrequencyDisplay();
                    
                    // Stop audio if playing in a vacuum
                    if (isPlaying) {
                        toggleAudio();
                    }
                    
                    challengeFeedback.textContent = "Notice how the sound wave particles stop moving when the medium is removed. This demonstrates that sound waves cannot travel through a vacuum. If you try to play sound with the medium off, it won't work!";
                    challengeFeedback.className = "mt-6 p-4 rounded-xl bg-data-100 dark:bg-data-900/30 text-data-800 dark:text-data-200 border border-data-200 dark:border-data-700";
                    challengeFeedback.classList.remove('hidden');
                } else if (challengeId === '2') {
                    // Speed Comparison challenge
                    lightSpeedRange.value = 10;
                    lightSpeed = 10;
                    lightSpeedValue.textContent = 10;
                    
                    soundSpeedRange.value = 1;
                    soundSpeed = 1;
                    soundSpeedValue.textContent = 1;
                    
                    mediumToggle.checked = true;
                    mediumPresent = true;
                    soundSpeedRange.disabled = false;
                    
                    updateLightFrequencyDisplay();
                    updateSoundFrequencyDisplay();
                    
                    challengeFeedback.textContent = "In this demo, light is moving 10 times faster than sound. In reality, light travels about 880,000 times faster than sound in air! That's why you see lightning before you hear thunder during a storm.";
                    challengeFeedback.className = "mt-6 p-4 rounded-xl bg-accent-100 dark:bg-accent-900/30 text-accent-800 dark:text-accent-200 border border-accent-200 dark:border-accent-700";
                    challengeFeedback.classList.remove('hidden');
                } else if (challengeId === '3') {
                    // Match Frequency challenge
                    // Set wavelength for light
                    const lightNmWavelength = 550; // Green light in nm
                    lightColorRange.value = lightNmWavelength;
                    lightWavelength = convertLightWavelength(lightNmWavelength);
                    updateLightColor(lightNmWavelength);
                    
                    // Set speed and frequency for light
                    lightSpeedRange.value = 4;
                    lightSpeed = 4;
                    lightSpeedValue.textContent = 4;
                    
                    // Set audio frequency 
                    audioFrequencyRange.value = 440; // A4 note
                    soundWavelength = convertAudioFrequency(440);
                    
                    // Set speed for sound to match light frequency
                    soundSpeedRange.value = 4;
                    soundSpeed = 4;
                    soundSpeedValue.textContent = 4;
                    
                    mediumToggle.checked = true;
                    mediumPresent = true;
                    soundSpeedRange.disabled = false;
                    
                    updateLightFrequencyDisplay();
                    updateSoundFrequencyDisplay();
                    updateMusicalNote(440);
                    
                    challengeFeedback.textContent = "You've matched the frequencies! Notice how both waves complete the same number of cycles per second, even though one is transverse and one is longitudinal. The frequency formula is f = v/λ.";
                    challengeFeedback.className = "mt-6 p-4 rounded-xl bg-premium-100 dark:bg-premium-900/30 text-premium-800 dark:text-premium-200 border border-premium-200 dark:border-premium-700";
                    challengeFeedback.classList.remove('hidden');
                }
            });
        });
        
        // Wave formula calculator
        calcSpeed_btn.addEventListener('click', () => {
            const freq = parseFloat(calcFreq.value);
            const wavelength = parseFloat(calcWavelength.value);
            if (!isNaN(freq) && !isNaN(wavelength)) {
                calcSpeed.value = (freq * wavelength).toFixed(2);
            }
        });
        
        calcFreq_btn.addEventListener('click', () => {
            const speed = parseFloat(calcSpeed.value);
            const wavelength = parseFloat(calcWavelength.value);
            if (!isNaN(speed) && !isNaN(wavelength) && wavelength !== 0) {
                calcFreq.value = (speed / wavelength).toFixed(2);
            }
        });
        
        calcWL_btn.addEventListener('click', () => {
            const speed = parseFloat(calcSpeed.value);
            const freq = parseFloat(calcFreq.value);
            if (!isNaN(speed) && !isNaN(freq) && freq !== 0) {
                calcWavelength.value = (speed / freq).toFixed(2);
            }
        });
        
        // Initialize quiz
        displayQuestion();
    </script>
</body>
</html>
