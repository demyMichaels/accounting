<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn Waves: Interactive Physics Tutorial</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: "#5D5CDE",
                            50: "#f0f0ff",
                            100: "#e0e0ff",
                            500: "#5D5CDE",
                            600: "#4a49c7",
                            700: "#3836b0",
                        },
                        success: "#22c55e",
                        warning: "#f59e0b",
                        error: "#ef4444",
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse-glow {
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 5px rgba(93, 92, 222, 0.5); }
            50% { box-shadow: 0 0 20px rgba(93, 92, 222, 0.8); }
        }

        .tutorial-highlight {
            position: relative;
            z-index: 100;
            border: 3px solid #5D5CDE;
            border-radius: 12px;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
        }

        .canvas-container {
            position: relative;
            width: 100%;
            height: 200px;
            margin-bottom: 1rem;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 8px;
        }

        .step-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 1rem;
        }

        .step-circle.active {
            background: #5D5CDE;
            color: white;
        }

        .step-circle.completed {
            background: #22c55e;
            color: white;
        }

        .step-circle.inactive {
            background: #e5e7eb;
            color: #6b7280;
        }

        .progress-bar {
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #5D5CDE, #22c55e);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .tooltip {
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            z-index: 1000;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
        }

        .tooltip.show {
            opacity: 1;
            transform: translateY(0);
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #1f2937 transparent transparent transparent;
        }

        .light-spectrum {
            height: 40px;
            background: linear-gradient(to right, 
                #8a2be2, #4b0082, #0000ff, #00ff00, #ffff00, #ff7f00, #ff0000
            );
            border-radius: 8px;
            position: relative;
        }

        .wavelength-indicator {
            position: absolute;
            height: 100%;
            width: 3px;
            background-color: white;
            top: 0;
            transform: translateX(-50%);
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
            border-radius: 2px;
        }

        .interactive-slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            outline: none;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .interactive-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #5D5CDE;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.2s ease;
        }

        .interactive-slider::-webkit-slider-thumb:hover {
            background: #4a49c7;
            box-shadow: 0 0 0 8px rgba(93, 92, 222, 0.16);
        }

        .concept-card {
            background: linear-gradient(135deg, rgba(93, 92, 222, 0.1) 0%, rgba(255, 255, 255, 0.1) 100%);
            border: 1px solid rgba(93, 92, 222, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .dark .concept-card {
            background: linear-gradient(135deg, rgba(93, 92, 222, 0.2) 0%, rgba(31, 41, 55, 0.8) 100%);
            border-color: rgba(93, 92, 222, 0.3);
        }

        .tutorial-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tutorial-modal {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .dark .tutorial-modal {
            background: #1f2937;
            color: white;
        }

        .nav-tabs {
            display: flex;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 1.5rem;
        }

        .nav-tab {
            padding: 0.75rem 1.5rem;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            color: #6b7280;
        }

        .nav-tab.active {
            color: #5D5CDE;
            border-bottom-color: #5D5CDE;
        }

        .nav-tab:hover {
            color: #5D5CDE;
        }

        .quiz-option {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            border-color: #5D5CDE;
            background: rgba(93, 92, 222, 0.05);
        }

        .quiz-option.selected {
            border-color: #5D5CDE;
            background: rgba(93, 92, 222, 0.1);
        }

        .quiz-option.correct {
            border-color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
        }

        .quiz-option.incorrect {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans">
    <!-- Tutorial Overlay -->
    <div id="tutorialOverlay" class="tutorial-overlay hidden">
        <div class="tutorial-modal">
            <div class="flex justify-between items-center mb-6">
                <h2 id="tutorialTitle" class="text-2xl font-bold text-primary">Welcome to Wave Learning!</h2>
                <button id="closeTutorial" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <span class="material-icons text-2xl">close</span>
                </button>
            </div>
            <div id="tutorialContent" class="space-y-4">
                <!-- Tutorial content will be inserted here -->
            </div>
            <div class="flex justify-between items-center mt-6">
                <button id="prevTutorial" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-primary disabled:opacity-50" disabled>
                    <span class="material-icons mr-1">arrow_back</span> Previous
                </button>
                <div class="flex space-x-2">
                    <div id="tutorialDots" class="flex space-x-2">
                        <!-- Tutorial dots will be inserted here -->
                    </div>
                </div>
                <button id="nextTutorial" class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-600 flex items-center">
                    Next <span class="material-icons ml-1">arrow_forward</span>
                </button>
            </div>
        </div>
    </div>

    <div class="max-w-6xl mx-auto p-6">
        <!-- Header with Progress -->
        <div class="text-center mb-8 fade-in">
            <h1 class="text-4xl font-bold text-primary mb-2">Learn Waves</h1>
            <p class="text-lg text-gray-600 dark:text-gray-400 mb-6">Interactive Physics Tutorial</p>
            
            <!-- Progress Bar -->
            <div class="max-w-md mx-auto mb-4">
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                </div>
                <div class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                    <span id="progressText">Step 0 of 6 complete</span>
                </div>
            </div>

            <!-- Quick Start Button -->
            <button id="startTutorial" class="bg-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-primary-600 transition-colors pulse-glow">
                🚀 Start Learning Journey
            </button>
        </div>

        <!-- Learning Tabs -->
        <div class="nav-tabs">
            <div id="conceptsTab" class="nav-tab active">
                <span class="material-icons mr-2">school</span>Concepts
            </div>
            <div id="explorationTab" class="nav-tab">
                <span class="material-icons mr-2">science</span>Exploration
            </div>
            <div id="quizTab" class="nav-tab">
                <span class="material-icons mr-2">quiz</span>Quiz
            </div>
            <div id="practiceTab" class="nav-tab">
                <span class="material-icons mr-2">engineering</span>Practice
            </div>
        </div>

        <!-- Concepts Section -->
        <div id="conceptsSection" class="space-y-6">
            <!-- Step 1: What are Waves? -->
            <div id="step1" class="concept-card fade-in">
                <div class="step-indicator">
                    <div class="step-circle active">1</div>
                    <div>
                        <h2 class="text-2xl font-bold text-primary">What are Waves?</h2>
                        <p class="text-gray-600 dark:text-gray-400">Let's start with the basics</p>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-semibold mb-3 text-primary">Simple Definition</h3>
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            A <strong>wave</strong> is a disturbance that travels through space or matter, carrying energy from one place to another <em>without</em> carrying matter.
                        </p>
                        
                        <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-4">
                            <h4 class="font-semibold text-blue-800 dark:text-blue-200 mb-2">💡 Think of it like this:</h4>
                            <p class="text-blue-700 dark:text-blue-300">
                                Imagine dropping a stone in a pond. The ripples spread outward, but the water doesn't move with the ripples - it just goes up and down. That's how waves work!
                            </p>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold mb-3 text-primary">Key Properties</h3>
                        <div class="space-y-3">
                            <div class="flex items-start space-x-3">
                                <div class="w-3 h-3 bg-primary rounded-full mt-1.5"></div>
                                <div>
                                    <strong>Wavelength (λ):</strong> Distance between two identical points
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="w-3 h-3 bg-green-500 rounded-full mt-1.5"></div>
                                <div>
                                    <strong>Frequency (f):</strong> How many waves pass by per second
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="w-3 h-3 bg-yellow-500 rounded-full mt-1.5"></div>
                                <div>
                                    <strong>Amplitude:</strong> Height of the wave (how "big" it is)
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="w-3 h-3 bg-red-500 rounded-full mt-1.5"></div>
                                <div>
                                    <strong>Speed (v):</strong> How fast the wave travels
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="nextStep mt-6 bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-600" data-next="step2">
                    Continue to Wave Types →
                </button>
            </div>

            <!-- Step 2: Two Types of Waves -->
            <div id="step2" class="concept-card fade-in hidden">
                <div class="step-indicator">
                    <div class="step-circle completed">1</div>
                    <div class="step-circle active">2</div>
                    <div>
                        <h2 class="text-2xl font-bold text-primary">Two Types of Waves</h2>
                        <p class="text-gray-600 dark:text-gray-400">Understanding how waves move</p>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Transverse Waves -->
                    <div class="border-2 border-blue-200 dark:border-blue-700 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-blue-600 dark:text-blue-400 mb-4 flex items-center">
                            <span class="material-icons mr-2">waves</span>Transverse Waves
                        </h3>
                        
                        <div class="canvas-container bg-gray-100 dark:bg-gray-800 rounded-lg mb-4">
                            <canvas id="transverseDemo" width="300" height="120"></canvas>
                        </div>
                        
                        <div class="space-y-3">
                            <p class="text-gray-700 dark:text-gray-300">
                                <strong>How it moves:</strong> Up and down (perpendicular to direction of travel)
                            </p>
                            <p class="text-gray-700 dark:text-gray-300">
                                <strong>Example:</strong> Light waves, water waves
                            </p>
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-3 rounded">
                                <p class="text-blue-700 dark:text-blue-300 text-sm">
                                    💡 Like shaking a rope up and down - the wave travels along the rope, but the rope moves up and down!
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Longitudinal Waves -->
                    <div class="border-2 border-green-200 dark:border-green-700 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-green-600 dark:text-green-400 mb-4 flex items-center">
                            <span class="material-icons mr-2">graphic_eq</span>Longitudinal Waves
                        </h3>
                        
                        <div class="canvas-container bg-gray-100 dark:bg-gray-800 rounded-lg mb-4">
                            <canvas id="longitudinalDemo" width="300" height="120"></canvas>
                        </div>
                        
                        <div class="space-y-3">
                            <p class="text-gray-700 dark:text-gray-300">
                                <strong>How it moves:</strong> Back and forth (parallel to direction of travel)
                            </p>
                            <p class="text-gray-700 dark:text-gray-300">
                                <strong>Example:</strong> Sound waves
                            </p>
                            <div class="bg-green-50 dark:bg-green-900/20 p-3 rounded">
                                <p class="text-green-700 dark:text-green-300 text-sm">
                                    💡 Like pushing a slinky - the coils bunch up and spread out as the wave travels!
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 flex space-x-4">
                    <button class="prevStep bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600" data-prev="step1">
                        ← Previous
                    </button>
                    <button class="nextStep bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-600" data-next="step3">
                        Continue to Light Waves →
                    </button>
                </div>
            </div>

            <!-- Step 3: Light Waves -->
            <div id="step3" class="concept-card fade-in hidden">
                <div class="step-indicator">
                    <div class="step-circle completed">1</div>
                    <div class="step-circle completed">2</div>
                    <div class="step-circle active">3</div>
                    <div>
                        <h2 class="text-2xl font-bold text-primary">Light Waves Explained</h2>
                        <p class="text-gray-600 dark:text-gray-400">Discover the amazing properties of light</p>
                    </div>
                </div>
                
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-purple-100 to-red-100 dark:from-purple-900/30 dark:to-red-900/30 p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-primary mb-4">🌈 Light is a Transverse Wave</h3>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold mb-3">Key Facts about Light:</h4>
                                <ul class="space-y-2 text-gray-700 dark:text-gray-300">
                                    <li class="flex items-start space-x-2">
                                        <span class="text-green-500">✓</span>
                                        <span>Doesn't need air or water to travel</span>
                                    </li>
                                    <li class="flex items-start space-x-2">
                                        <span class="text-green-500">✓</span>
                                        <span>Can travel through empty space (vacuum)</span>
                                    </li>
                                    <li class="flex items-start space-x-2">
                                        <span class="text-green-500">✓</span>
                                        <span>Travels incredibly fast: 300,000 km per second!</span>
                                    </li>
                                    <li class="flex items-start space-x-2">
                                        <span class="text-green-500">✓</span>
                                        <span>Different wavelengths = different colors</span>
                                    </li>
                                </ul>
                            </div>
                            
                            <div>
                                <h4 class="font-semibold mb-3">Try This Interactive Demo:</h4>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Change the Color (Wavelength):</label>
                                        <div class="light-spectrum mb-2">
                                            <div id="lightIndicator" class="wavelength-indicator" style="left: 50%"></div>
                                        </div>
                                        <input type="range" id="lightWavelengthSlider" class="interactive-slider" 
                                               min="400" max="700" value="550" step="10">
                                        <div class="flex justify-between text-xs text-gray-600 dark:text-gray-400 mt-1">
                                            <span>Violet</span>
                                            <span>Green</span>
                                            <span>Red</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center space-x-4">
                                        <div id="colorDisplay" class="w-16 h-16 rounded-lg border-2 border-gray-300 dark:border-gray-600" style="background-color: #00ff00;"></div>
                                        <div>
                                            <div class="text-sm"><strong>Wavelength:</strong> <span id="wavelengthValue">550</span> nm</div>
                                            <div class="text-sm"><strong>Color:</strong> <span id="colorName">Green</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="canvas-container bg-gray-100 dark:bg-gray-800 rounded-lg">
                        <canvas id="lightWaveCanvas" width="600" height="200"></canvas>
                        <div class="absolute bottom-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-sm">
                            Light Wave Animation
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 flex space-x-4">
                    <button class="prevStep bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600" data-prev="step2">
                        ← Previous
                    </button>
                    <button class="nextStep bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-600" data-next="step4">
                        Continue to Sound Waves →
                    </button>
                </div>
            </div>

            <!-- Step 4: Sound Waves -->
            <div id="step4" class="concept-card fade-in hidden">
                <div class="step-indicator">
                    <div class="step-circle completed">1</div>
                    <div class="step-circle completed">2</div>
                    <div class="step-circle completed">3</div>
                    <div class="step-circle active">4</div>
                    <div>
                        <h2 class="text-2xl font-bold text-primary">Sound Waves Explained</h2>
                        <p class="text-gray-600 dark:text-gray-400">Understanding how we hear</p>
                    </div>
                </div>
                
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-blue-100 to-green-100 dark:from-blue-900/30 dark:to-green-900/30 p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-primary mb-4">🔊 Sound is a Longitudinal Wave</h3>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold mb-3">Key Facts about Sound:</h4>
                                <ul class="space-y-2 text-gray-700 dark:text-gray-300">
                                    <li class="flex items-start space-x-2">
                                        <span class="text-blue-500">📌</span>
                                        <span>NEEDS air, water, or solid material to travel</span>
                                    </li>
                                    <li class="flex items-start space-x-2">
                                        <span class="text-red-500">❌</span>
                                        <span>Cannot travel through empty space</span>
                                    </li>
                                    <li class="flex items-start space-x-2">
                                        <span class="text-blue-500">📌</span>
                                        <span>Travels much slower than light: ~340 m/s in air</span>
                                    </li>
                                    <li class="flex items-start space-x-2">
                                        <span class="text-blue-500">📌</span>
                                        <span>Higher frequency = higher pitch</span>
                                    </li>
                                </ul>
                            </div>
                            
                            <div>
                                <h4 class="font-semibold mb-3">Try This Interactive Demo:</h4>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Change the Pitch (Frequency):</label>
                                        <input type="range" id="soundFrequencySlider" class="interactive-slider" 
                                               min="100" max="1000" value="440" step="10">
                                        <div class="flex justify-between text-xs text-gray-600 dark:text-gray-400 mt-1">
                                            <span>Low (100Hz)</span>
                                            <span>High (1000Hz)</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center space-x-4">
                                        <button id="playSoundBtn" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center">
                                            <span class="material-icons mr-1">play_arrow</span>
                                            Play Sound
                                        </button>
                                        <div>
                                            <div class="text-sm"><strong>Frequency:</strong> <span id="frequencyValue">440</span> Hz</div>
                                            <div class="text-sm"><strong>Note:</strong> <span id="noteName">A4</span></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" id="mediumToggle" checked class="mr-2">
                                        <span class="text-sm">Medium present (air/water)</span>
                                    </label>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                        Uncheck to see what happens in space!
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="canvas-container bg-gray-100 dark:bg-gray-800 rounded-lg">
                        <canvas id="soundWaveCanvas" width="600" height="200"></canvas>
                        <div class="absolute bottom-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-sm">
                            Sound Wave Animation
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 flex space-x-4">
                    <button class="prevStep bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600" data-prev="step3">
                        ← Previous
                    </button>
                    <button class="nextStep bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-600" data-next="step5">
                        Continue to Comparison →
                    </button>
                </div>
            </div>

            <!-- Step 5: Comparison -->
            <div id="step5" class="concept-card fade-in hidden">
                <div class="step-indicator">
                    <div class="step-circle completed">1</div>
                    <div class="step-circle completed">2</div>
                    <div class="step-circle completed">3</div>
                    <div class="step-circle completed">4</div>
                    <div class="step-circle active">5</div>
                    <div>
                        <h2 class="text-2xl font-bold text-primary">Light vs Sound: Key Differences</h2>
                        <p class="text-gray-600 dark:text-gray-400">Compare and contrast</p>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Light Properties -->
                    <div class="border-2 border-yellow-200 dark:border-yellow-700 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-yellow-600 dark:text-yellow-400 mb-4 flex items-center">
                            <span class="material-icons mr-2">wb_sunny</span>Light Waves
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg">
                                <h4 class="font-semibold text-yellow-800 dark:text-yellow-200">Wave Type</h4>
                                <p class="text-yellow-700 dark:text-yellow-300">Transverse (oscillates perpendicular)</p>
                            </div>
                            
                            <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg">
                                <h4 class="font-semibold text-yellow-800 dark:text-yellow-200">Medium Needed?</h4>
                                <p class="text-yellow-700 dark:text-yellow-300">❌ No - can travel through vacuum</p>
                            </div>
                            
                            <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg">
                                <h4 class="font-semibold text-yellow-800 dark:text-yellow-200">Speed</h4>
                                <p class="text-yellow-700 dark:text-yellow-300">Very fast: 300,000 km/s</p>
                            </div>
                            
                            <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg">
                                <h4 class="font-semibold text-yellow-800 dark:text-yellow-200">What We Detect</h4>
                                <p class="text-yellow-700 dark:text-yellow-300">Different colors with our eyes</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sound Properties -->
                    <div class="border-2 border-blue-200 dark:border-blue-700 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-blue-600 dark:text-blue-400 mb-4 flex items-center">
                            <span class="material-icons mr-2">volume_up</span>Sound Waves
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                                <h4 class="font-semibold text-blue-800 dark:text-blue-200">Wave Type</h4>
                                <p class="text-blue-700 dark:text-blue-300">Longitudinal (oscillates parallel)</p>
                            </div>
                            
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                                <h4 class="font-semibold text-blue-800 dark:text-blue-200">Medium Needed?</h4>
                                <p class="text-blue-700 dark:text-blue-300">✅ Yes - needs air, water, or solid</p>
                            </div>
                            
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                                <h4 class="font-semibold text-blue-800 dark:text-blue-200">Speed</h4>
                                <p class="text-blue-700 dark:text-blue-300">Slower: 340 m/s in air</p>
                            </div>
                            
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                                <h4 class="font-semibold text-blue-800 dark:text-blue-200">What We Detect</h4>
                                <p class="text-blue-700 dark:text-blue-300">Different pitches with our ears</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Interactive Comparison -->
                <div class="mt-8 bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
                    <h3 class="text-lg font-bold text-primary mb-4">🧪 Interactive Comparison</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <canvas id="comparisonLight" width="300" height="150" class="border rounded"></canvas>
                            <p class="text-center mt-2 text-sm font-medium">Light Wave (Transverse)</p>
                        </div>
                        <div>
                            <canvas id="comparisonSound" width="300" height="150" class="border rounded"></canvas>
                            <p class="text-center mt-2 text-sm font-medium">Sound Wave (Longitudinal)</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 flex space-x-4">
                    <button class="prevStep bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600" data-prev="step4">
                        ← Previous
                    </button>
                    <button class="nextStep bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-600" data-next="step6">
                        Continue to Real-World Examples →
                    </button>
                </div>
            </div>

            <!-- Step 6: Real-World Examples -->
            <div id="step6" class="concept-card fade-in hidden">
                <div class="step-indicator">
                    <div class="step-circle completed">1</div>
                    <div class="step-circle completed">2</div>
                    <div class="step-circle completed">3</div>
                    <div class="step-circle completed">4</div>
                    <div class="step-circle completed">5</div>
                    <div class="step-circle active">6</div>
                    <div>
                        <h2 class="text-2xl font-bold text-primary">Real-World Examples</h2>
                        <p class="text-gray-600 dark:text-gray-400">See waves in action around you</p>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Light Examples -->
                    <div>
                        <h3 class="text-xl font-bold text-yellow-600 dark:text-yellow-400 mb-4">🌟 Light Wave Examples</h3>
                        <div class="space-y-4">
                            <div class="bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 p-4 rounded-lg">
                                <h4 class="font-bold text-yellow-800 dark:text-yellow-200">🌩️ Lightning & Thunder</h4>
                                <p class="text-yellow-700 dark:text-yellow-300">You see the lightning first, then hear the thunder because light travels much faster than sound!</p>
                            </div>
                            
                            <div class="bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 p-4 rounded-lg">
                                <h4 class="font-bold text-purple-800 dark:text-purple-200">🌈 Rainbows</h4>
                                <p class="text-purple-700 dark:text-purple-300">Different colors (wavelengths) of light bend differently when passing through water droplets.</p>
                            </div>
                            
                            <div class="bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 p-4 rounded-lg">
                                <h4 class="font-bold text-blue-800 dark:text-blue-200">🚀 Light from Stars</h4>
                                <p class="text-blue-700 dark:text-blue-300">Starlight travels through the vacuum of space to reach Earth - no medium needed!</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sound Examples -->
                    <div>
                        <h3 class="text-xl font-bold text-blue-600 dark:text-blue-400 mb-4">🔊 Sound Wave Examples</h3>
                        <div class="space-y-4">
                            <div class="bg-gradient-to-r from-blue-100 to-cyan-100 dark:from-blue-900/30 dark:to-cyan-900/30 p-4 rounded-lg">
                                <h4 class="font-bold text-blue-800 dark:text-blue-200">🏔️ Mountain Echoes</h4>
                                <p class="text-blue-700 dark:text-blue-300">Sound waves bounce off mountain faces and return to you as an echo.</p>
                            </div>
                            
                            <div class="bg-gradient-to-r from-green-100 to-teal-100 dark:from-green-900/30 dark:to-teal-900/30 p-4 rounded-lg">
                                <h4 class="font-bold text-green-800 dark:text-green-200">🐋 Whale Communication</h4>
                                <p class="text-green-700 dark:text-green-300">Whales use sound waves that travel through water to communicate over long distances.</p>
                            </div>
                            
                            <div class="bg-gradient-to-r from-red-100 to-orange-100 dark:from-red-900/30 dark:to-orange-900/30 p-4 rounded-lg">
                                <h4 class="font-bold text-red-800 dark:text-red-200">🏥 Medical Ultrasound</h4>
                                <p class="text-red-700 dark:text-red-300">High-frequency sound waves create images inside the human body.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Fun Fact -->
                <div class="mt-8 bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 p-6 rounded-lg">
                    <h3 class="text-lg font-bold text-purple-800 dark:text-purple-200 mb-3">🤯 Amazing Fact!</h3>
                    <p class="text-purple-700 dark:text-purple-300">
                        Light from the Sun takes about 8 minutes to reach Earth. But if sound could travel through space (which it can't!), 
                        it would take over <strong>13 years</strong> to make the same journey!
                    </p>
                </div>
                
                <div class="mt-6 flex space-x-4">
                    <button class="prevStep bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600" data-prev="step5">
                        ← Previous
                    </button>
                    <button id="completeBasics" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600">
                        Complete Basics! ✅
                    </button>
                </div>
            </div>
        </div>

        <!-- Exploration Section -->
        <div id="explorationSection" class="space-y-6 hidden">
            <div class="concept-card">
                <h2 class="text-2xl font-bold text-primary mb-6">🔬 Interactive Wave Lab</h2>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Light Wave Controls -->
                    <div class="border-2 border-yellow-200 dark:border-yellow-700 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-yellow-600 dark:text-yellow-400 mb-4">Light Wave Controls</h3>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium mb-2">Wavelength (Color)</label>
                                <div class="light-spectrum mb-2">
                                    <div id="lightIndicator2" class="wavelength-indicator" style="left: 50%"></div>
                                </div>
                                <input type="range" id="lightWavelength2" class="interactive-slider" 
                                       min="400" max="700" value="550" step="10">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Amplitude (Brightness)</label>
                                <input type="range" id="lightAmplitude" class="interactive-slider" 
                                       min="10" max="50" value="30" step="5">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Speed</label>
                                <input type="range" id="lightSpeed" class="interactive-slider" 
                                       min="1" max="10" value="5" step="1">
                            </div>
                        </div>
                        
                        <div class="canvas-container bg-gray-100 dark:bg-gray-800 rounded-lg mt-4">
                            <canvas id="lightExploration" width="400" height="150"></canvas>
                        </div>
                    </div>
                    
                    <!-- Sound Wave Controls -->
                    <div class="border-2 border-blue-200 dark:border-blue-700 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-blue-600 dark:text-blue-400 mb-4">Sound Wave Controls</h3>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium mb-2">Frequency (Pitch)</label>
                                <input type="range" id="soundFrequency2" class="interactive-slider" 
                                       min="100" max="1000" value="440" step="10">
                                <div class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                    <span id="noteValue2">A4 (440 Hz)</span>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Amplitude (Volume)</label>
                                <input type="range" id="soundAmplitude" class="interactive-slider" 
                                       min="5" max="40" value="20" step="5">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Speed</label>
                                <input type="range" id="soundSpeed" class="interactive-slider" 
                                       min="0" max="5" value="2" step="1">
                            </div>
                            
                            <div>
                                <label class="flex items-center cursor-pointer">
                                    <input type="checkbox" id="mediumToggle2" checked class="mr-2">
                                    <span class="text-sm">Medium Present</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="canvas-container bg-gray-100 dark:bg-gray-800 rounded-lg mt-4">
                            <canvas id="soundExploration" width="400" height="150"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- Wave Equation -->
                <div class="mt-8 bg-gradient-to-r from-purple-100 to-blue-100 dark:from-purple-900/30 dark:to-blue-900/30 p-6 rounded-lg">
                    <h3 class="text-xl font-bold text-primary mb-4">📐 Wave Equation: v = f × λ</h3>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-white dark:bg-gray-800 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-primary">v</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Speed</div>
                            <div class="text-xs text-gray-500 dark:text-gray-500">How fast the wave travels</div>
                        </div>
                        <div class="bg-white dark:bg-gray-800 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-green-500">f</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Frequency</div>
                            <div class="text-xs text-gray-500 dark:text-gray-500">Waves per second</div>
                        </div>
                        <div class="bg-white dark:bg-gray-800 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-blue-500">λ</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Wavelength</div>
                            <div class="text-xs text-gray-500 dark:text-gray-500">Distance between peaks</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quiz Section -->
        <div id="quizSection" class="space-y-6 hidden">
            <div class="concept-card">
                <h2 class="text-2xl font-bold text-primary mb-6">🧠 Test Your Knowledge</h2>
                
                <div id="quizContainer" class="space-y-6">
                    <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold">Question <span id="currentQuestionNum">1</span> of <span id="totalQuestions">5</span></h3>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Score: <span id="quizScore">0</span>/<span id="maxScore">0</span></div>
                        </div>
                        
                        <div id="questionContainer">
                            <h4 id="questionText" class="text-lg font-medium mb-4">Loading question...</h4>
                            <div id="optionsContainer" class="space-y-3">
                                <!-- Options will be inserted here -->
                            </div>
                        </div>
                        
                        <div id="feedbackContainer" class="mt-4 p-4 rounded-lg hidden">
                            <!-- Feedback will be shown here -->
                        </div>
                        
                        <div class="flex justify-between items-center mt-6">
                            <button id="prevQuizBtn" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-primary disabled:opacity-50" disabled>
                                ← Previous
                            </button>
                            <button id="submitQuizBtn" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-600">
                                Submit Answer
                            </button>
                            <button id="nextQuizBtn" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-primary disabled:opacity-50" disabled>
                                Next →
                            </button>
                        </div>
                    </div>
                </div>
                
                <div id="quizResults" class="bg-gradient-to-r from-green-100 to-blue-100 dark:from-green-900/30 dark:to-blue-900/30 p-6 rounded-lg hidden">
                    <h3 class="text-xl font-bold text-green-800 dark:text-green-200 mb-4">🎉 Quiz Complete!</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <div class="text-3xl font-bold text-green-600 dark:text-green-400" id="finalScore">0/5</div>
                            <div class="text-gray-600 dark:text-gray-400">Final Score</div>
                        </div>
                        <div>
                            <div class="text-lg font-semibold" id="scoreMessage">Great job!</div>
                            <button id="retakeQuiz" class="mt-2 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-600">
                                Retake Quiz
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Practice Section -->
        <div id="practiceSection" class="space-y-6 hidden">
            <div class="concept-card">
                <h2 class="text-2xl font-bold text-primary mb-6">🏗️ Wave Builder Challenge</h2>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-lg font-bold mb-4">Your Challenge:</h3>
                        <div id="challengeDescription" class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-4">
                            <p class="text-blue-800 dark:text-blue-200">
                                Create a light wave with a wavelength of 500nm (cyan color) and match the target frequency!
                            </p>
                        </div>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Target Frequency: <span id="targetFreq" class="font-bold text-primary">1.2 Hz</span></label>
                                <div class="bg-gray-100 dark:bg-gray-800 p-3 rounded">
                                    <div class="text-sm">Your Frequency: <span id="yourFreq" class="font-bold">0.8 Hz</span></div>
                                    <div class="w-full bg-gray-300 dark:bg-gray-600 rounded-full h-2 mt-2">
                                        <div id="freqProgress" class="bg-primary h-2 rounded-full transition-all" style="width: 66%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Wavelength</label>
                                <input type="range" id="practiceWavelength" class="interactive-slider" 
                                       min="400" max="700" value="550" step="10">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Speed</label>
                                <input type="range" id="practiceSpeed" class="interactive-slider" 
                                       min="1" max="10" value="5" step="1">
                            </div>
                            
                            <button id="checkAnswer" class="w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-semibold">
                                Check My Answer!
                            </button>
                        </div>
                        
                        <div id="practiceResult" class="mt-4 p-4 rounded-lg hidden">
                            <!-- Results will be shown here -->
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-bold mb-4">Your Wave:</h3>
                        <div class="canvas-container bg-gray-100 dark:bg-gray-800 rounded-lg">
                            <canvas id="practiceCanvas" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="mt-4 bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Wave Properties:</h4>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <div class="text-gray-600 dark:text-gray-400">Wavelength:</div>
                                    <div id="displayWavelength" class="font-medium">550 nm</div>
                                </div>
                                <div>
                                    <div class="text-gray-600 dark:text-gray-400">Speed:</div>
                                    <div id="displaySpeed" class="font-medium">5 units</div>
                                </div>
                                <div>
                                    <div class="text-gray-600 dark:text-gray-400">Frequency:</div>
                                    <div id="displayFrequency" class="font-medium">0.8 Hz</div>
                                </div>
                                <div>
                                    <div class="text-gray-600 dark:text-gray-400">Color:</div>
                                    <div id="displayColor" class="font-medium">Green</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tooltip -->
    <div id="tooltip" class="tooltip"></div>

    <script>
        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Global variables
        let currentStep = 1;
        let completedSteps = new Set();
        let animationId;
        let time = 0;
        
        // Audio context for sound
        let audioContext;
        let oscillator;
        let gainNode;
        let isPlaying = false;

        // Tutorial system
        const tutorials = [
            {
                title: "Welcome to Wave Learning!",
                content: `
                    <div class="text-center">
                        <div class="text-6xl mb-4">🌊</div>
                        <p class="text-lg mb-4">Welcome to the most interactive way to learn about waves!</p>
                        <p class="text-gray-600 dark:text-gray-400">We'll guide you step-by-step through the fascinating world of light and sound waves.</p>
                    </div>
                `
            },
            {
                title: "Your Learning Journey",
                content: `
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold">What You'll Learn:</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg">
                                <div class="font-semibold text-blue-800 dark:text-blue-200">📚 Concepts</div>
                                <div class="text-sm text-blue-700 dark:text-blue-300">Basic wave principles</div>
                            </div>
                            <div class="bg-green-50 dark:bg-green-900/20 p-3 rounded-lg">
                                <div class="font-semibold text-green-800 dark:text-green-200">🔬 Exploration</div>
                                <div class="text-sm text-green-700 dark:text-green-300">Interactive experiments</div>
                            </div>
                            <div class="bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg">
                                <div class="font-semibold text-purple-800 dark:text-purple-200">🧠 Quiz</div>
                                <div class="text-sm text-purple-700 dark:text-purple-300">Test your knowledge</div>
                            </div>
                            <div class="bg-orange-50 dark:bg-orange-900/20 p-3 rounded-lg">
                                <div class="font-semibold text-orange-800 dark:text-orange-200">🏗️ Practice</div>
                                <div class="text-sm text-orange-700 dark:text-orange-300">Build waves yourself</div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                title: "How to Use This Tutorial",
                content: `
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold">Navigation Tips:</h3>
                        <ul class="space-y-2">
                            <li class="flex items-start space-x-2">
                                <span class="text-green-500">✓</span>
                                <span>Follow the steps in order for the best learning experience</span>
                            </li>
                            <li class="flex items-start space-x-2">
                                <span class="text-green-500">✓</span>
                                <span>Interact with all the sliders and buttons - they're there to help you learn!</span>
                            </li>
                            <li class="flex items-start space-x-2">
                                <span class="text-green-500">✓</span>
                                <span>Don't worry about getting things wrong - that's part of learning!</span>
                            </li>
                            <li class="flex items-start space-x-2">
                                <span class="text-green-500">✓</span>
                                <span>Use the tabs at the top to jump between sections</span>
                            </li>
                        </ul>
                        <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg mt-4">
                            <p class="text-yellow-800 dark:text-yellow-200">
                                💡 <strong>Pro tip:</strong> Take your time and experiment with the controls. 
                                The best learning happens when you play around and see what happens!
                            </p>
                        </div>
                    </div>
                `
            }
        ];

        let currentTutorial = 0;

        // Quiz questions
        const quizQuestions = [
            {
                question: "What type of wave is light?",
                options: ["Longitudinal", "Transverse", "Both", "Neither"],
                correct: 1,
                explanation: "Light is a transverse wave because it oscillates perpendicular to its direction of travel."
            },
            {
                question: "Which wave requires a medium to travel?",
                options: ["Light", "Sound", "Both", "Neither"],
                correct: 1,
                explanation: "Sound waves need a medium (like air or water) to travel through, while light can travel through a vacuum."
            },
            {
                question: "If you increase the wavelength of a light wave, what happens to its color?",
                options: ["It becomes more blue", "It becomes more red", "It stays the same", "It becomes invisible"],
                correct: 1,
                explanation: "Longer wavelengths correspond to redder colors in the visible spectrum."
            },
            {
                question: "Why do you see lightning before hearing thunder?",
                options: ["Sound is louder", "Light travels faster", "Eyes are better than ears", "Thunder comes later"],
                correct: 1,
                explanation: "Light travels much faster than sound, so you see the lightning almost instantly but hear the thunder later."
            },
            {
                question: "In the wave equation v = f × λ, what does 'f' represent?",
                options: ["Force", "Frequency", "Function", "Friction"],
                correct: 1,
                explanation: "In the wave equation, 'f' represents frequency - how many waves pass by per second."
            }
        ];

        let currentQuizQuestion = 0;
        let quizScore = 0;
        let quizAnswered = [];

        // Initialize the app
        function init() {
            setupEventListeners();
            setupAnimation();
            initAudio();
            updateProgress();
            showTutorial();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Tutorial controls
            document.getElementById('startTutorial').addEventListener('click', showTutorial);
            document.getElementById('closeTutorial').addEventListener('click', hideTutorial);
            document.getElementById('nextTutorial').addEventListener('click', nextTutorial);
            document.getElementById('prevTutorial').addEventListener('click', prevTutorial);

            // Navigation steps
            document.querySelectorAll('.nextStep').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const nextStep = e.target.closest('button').dataset.next;
                    if (nextStep) {
                        showStep(parseInt(nextStep.replace('step', '')));
                    }
                });
            });

            document.querySelectorAll('.prevStep').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const prevStep = e.target.closest('button').dataset.prev;
                    if (prevStep) {
                        showStep(parseInt(prevStep.replace('step', '')));
                    }
                });
            });

            // Tab navigation
            document.getElementById('conceptsTab').addEventListener('click', () => switchTab('concepts'));
            document.getElementById('explorationTab').addEventListener('click', () => switchTab('exploration'));
            document.getElementById('quizTab').addEventListener('click', () => switchTab('quiz'));
            document.getElementById('practiceTab').addEventListener('click', () => switchTab('practice'));

            // Light controls
            document.getElementById('lightWavelengthSlider').addEventListener('input', updateLightColor);
            document.getElementById('lightWavelength2')?.addEventListener('input', updateLightColor2);
            document.getElementById('lightAmplitude')?.addEventListener('input', updateLightWave);
            document.getElementById('lightSpeed')?.addEventListener('input', updateLightWave);

            // Sound controls
            document.getElementById('soundFrequencySlider').addEventListener('input', updateSoundFrequency);
            document.getElementById('soundFrequency2')?.addEventListener('input', updateSoundFrequency2);
            document.getElementById('soundAmplitude')?.addEventListener('input', updateSoundWave);
            document.getElementById('soundSpeed')?.addEventListener('input', updateSoundWave);
            document.getElementById('playSoundBtn').addEventListener('click', toggleSound);
            document.getElementById('mediumToggle').addEventListener('change', updateMedium);
            document.getElementById('mediumToggle2')?.addEventListener('change', updateMedium2);

            // Quiz controls
            document.getElementById('submitQuizBtn').addEventListener('click', submitQuizAnswer);
            document.getElementById('nextQuizBtn').addEventListener('click', nextQuizQuestion);
            document.getElementById('prevQuizBtn').addEventListener('click', prevQuizQuestion);
            document.getElementById('retakeQuiz').addEventListener('click', restartQuiz);

            // Practice controls
            document.getElementById('practiceWavelength')?.addEventListener('input', updatePractice);
            document.getElementById('practiceSpeed')?.addEventListener('input', updatePractice);
            document.getElementById('checkAnswer')?.addEventListener('click', checkPracticeAnswer);

            // Complete basics
            document.getElementById('completeBasics')?.addEventListener('click', completeBasics);
        }

        // Tutorial functions
        function showTutorial() {
            document.getElementById('tutorialOverlay').classList.remove('hidden');
            displayTutorial();
        }

        function hideTutorial() {
            document.getElementById('tutorialOverlay').classList.add('hidden');
        }

        function displayTutorial() {
            const tutorial = tutorials[currentTutorial];
            document.getElementById('tutorialTitle').textContent = tutorial.title;
            document.getElementById('tutorialContent').innerHTML = tutorial.content;

            // Update navigation
            document.getElementById('prevTutorial').disabled = currentTutorial === 0;
            document.getElementById('nextTutorial').textContent = 
                currentTutorial === tutorials.length - 1 ? 'Start Learning!' : 'Next';

            // Update dots
            const dotsContainer = document.getElementById('tutorialDots');
            dotsContainer.innerHTML = '';
            for (let i = 0; i < tutorials.length; i++) {
                const dot = document.createElement('div');
                dot.className = `w-3 h-3 rounded-full ${i === currentTutorial ? 'bg-primary' : 'bg-gray-300'}`;
                dotsContainer.appendChild(dot);
            }
        }

        function nextTutorial() {
            if (currentTutorial < tutorials.length - 1) {
                currentTutorial++;
                displayTutorial();
            } else {
                hideTutorial();
            }
        }

        function prevTutorial() {
            if (currentTutorial > 0) {
                currentTutorial--;
                displayTutorial();
            }
        }

        // Step navigation
        function showStep(stepNumber) {
            // Hide all steps
            for (let i = 1; i <= 6; i++) {
                const step = document.getElementById(`step${i}`);
                if (step) step.classList.add('hidden');
            }

            // Show current step
            const currentStepEl = document.getElementById(`step${stepNumber}`);
            if (currentStepEl) {
                currentStepEl.classList.remove('hidden');
                currentStep = stepNumber;
                completedSteps.add(stepNumber - 1);
                updateProgress();
            }
        }

        // Tab switching
        function switchTab(tabName) {
            // Hide all sections
            document.getElementById('conceptsSection').classList.add('hidden');
            document.getElementById('explorationSection').classList.add('hidden');
            document.getElementById('quizSection').classList.add('hidden');
            document.getElementById('practiceSection').classList.add('hidden');

            // Show selected section
            document.getElementById(`${tabName}Section`).classList.remove('hidden');

            // Update tab appearance
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(`${tabName}Tab`).classList.add('active');

            // Initialize section-specific content
            if (tabName === 'quiz') {
                initQuiz();
            } else if (tabName === 'practice') {
                initPractice();
            }
        }

        // Progress tracking
        function updateProgress() {
            const progress = (completedSteps.size / 6) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = 
                `Step ${completedSteps.size} of 6 complete`;
        }

        // Light wave functions
        function updateLightColor() {
            const wavelength = parseInt(document.getElementById('lightWavelengthSlider').value);
            const [color, name] = wavelengthToColor(wavelength);
            
            document.getElementById('wavelengthValue').textContent = wavelength;
            document.getElementById('colorName').textContent = name;
            document.getElementById('colorDisplay').style.backgroundColor = color;
            
            // Update indicator position
            const percent = ((wavelength - 400) / 300) * 100;
            document.getElementById('lightIndicator').style.left = `${percent}%`;
        }

        function updateLightColor2() {
            const wavelength = parseInt(document.getElementById('lightWavelength2').value);
            const percent = ((wavelength - 400) / 300) * 100;
            document.getElementById('lightIndicator2').style.left = `${percent}%`;
        }

        function updateLightWave() {
            // Light wave parameters updated in animation loop
        }

        // Sound wave functions
        function updateSoundFrequency() {
            const frequency = parseInt(document.getElementById('soundFrequencySlider').value);
            const note = frequencyToNote(frequency);
            
            document.getElementById('frequencyValue').textContent = frequency;
            document.getElementById('noteName').textContent = note;
        }

        function updateSoundFrequency2() {
            const frequency = parseInt(document.getElementById('soundFrequency2').value);
            const note = frequencyToNote(frequency);
            document.getElementById('noteValue2').textContent = `${note} (${frequency} Hz)`;
        }

        function updateSoundWave() {
            // Sound wave parameters updated in animation loop
        }

        function updateMedium() {
            const hasMedium = document.getElementById('mediumToggle').checked;
            if (!hasMedium) {
                // Show warning about no sound in vacuum
                setTimeout(() => {
                    showCustomAlert('No Medium!', 
                        'Sound waves cannot travel without a medium like air or water. This is why space is silent!');
                }, 100);
            }
        }

        function updateMedium2() {
            const hasMedium = document.getElementById('mediumToggle2').checked;
            const speedSlider = document.getElementById('soundSpeed');
            speedSlider.disabled = !hasMedium;
            if (!hasMedium) {
                speedSlider.value = 0;
            }
        }

        // Audio functions
        function initAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                gainNode = audioContext.createGain();
                gainNode.connect(audioContext.destination);
            } catch (e) {
                console.warn('Audio not supported');
            }
        }

        function toggleSound() {
            if (!audioContext) return;

            const hasMedium = document.getElementById('mediumToggle').checked;
            if (!hasMedium) {
                showCustomAlert('Cannot Play Sound!', 
                    'Sound needs a medium to travel. Turn on the medium toggle first!');
                return;
            }

            if (isPlaying) {
                stopSound();
            } else {
                playSound();
            }
        }

        function playSound() {
            if (!audioContext) return;

            const frequency = parseInt(document.getElementById('soundFrequencySlider').value);
            
            oscillator = audioContext.createOscillator();
            oscillator.frequency.value = frequency;
            oscillator.type = 'sine';
            oscillator.connect(gainNode);
            
            gainNode.gain.value = 0.1; // Low volume
            oscillator.start();
            
            isPlaying = true;
            document.getElementById('playSoundBtn').innerHTML = 
                '<span class="material-icons mr-1">stop</span>Stop Sound';
        }

        function stopSound() {
            if (oscillator) {
                oscillator.stop();
                oscillator = null;
            }
            isPlaying = false;
            document.getElementById('playSoundBtn').innerHTML = 
                '<span class="material-icons mr-1">play_arrow</span>Play Sound';
        }

        // Utility functions
        function wavelengthToColor(wavelength) {
            let r, g, b, name;
            
            if (wavelength >= 380 && wavelength < 440) {
                r = -1 * (wavelength - 440) / (440 - 380);
                g = 0;
                b = 1;
                name = "Violet";
            } else if (wavelength >= 440 && wavelength < 490) {
                r = 0;
                g = (wavelength - 440) / (490 - 440);
                b = 1;
                name = "Blue";
            } else if (wavelength >= 490 && wavelength < 510) {
                r = 0;
                g = 1;
                b = -1 * (wavelength - 510) / (510 - 490);
                name = "Cyan";
            } else if (wavelength >= 510 && wavelength < 580) {
                r = (wavelength - 510) / (580 - 510);
                g = 1;
                b = 0;
                name = "Green";
            } else if (wavelength >= 580 && wavelength < 645) {
                r = 1;
                g = -1 * (wavelength - 645) / (645 - 580);
                b = 0;
                name = wavelength < 600 ? "Yellow" : "Orange";
            } else if (wavelength >= 645 && wavelength <= 780) {
                r = 1;
                g = 0;
                b = 0;
                name = "Red";
            } else {
                r = 0;
                g = 0;
                b = 0;
                name = "Not visible";
            }
            
            r = Math.round(255 * r);
            g = Math.round(255 * g);
            b = Math.round(255 * b);
            
            return [`rgb(${r}, ${g}, ${b})`, name];
        }

        function frequencyToNote(frequency) {
            const noteNames = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
            const A4 = 440;
            
            const halfSteps = Math.round(12 * Math.log2(frequency / A4));
            let octave = 4 + Math.floor((halfSteps + 9) / 12);
            let noteIndex = (halfSteps + 9) % 12;
            if (noteIndex < 0) noteIndex += 12;
            
            return `${noteNames[noteIndex]}${octave}`;
        }

        function showCustomAlert(title, message) {
            // Create custom modal instead of using alert()
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-11/12">
                    <h3 class="text-lg font-bold text-primary mb-3">${title}</h3>
                    <p class="text-gray-700 dark:text-gray-300 mb-4">${message}</p>
                    <button onclick="this.closest('.fixed').remove()" 
                            class="w-full bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-600">
                        Got it!
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Animation setup
        function setupAnimation() {
            function animate() {
                time += 0.05;
                
                drawTransverseDemo();
                drawLongitudinalDemo();
                drawLightWave();
                drawSoundWave();
                drawComparisonWaves();
                drawExplorationWaves();
                drawPracticeWave();
                
                animationId = requestAnimationFrame(animate);
            }
            animate();
        }

        // Canvas drawing functions
        function drawTransverseDemo() {
            const canvas = document.getElementById('transverseDemo');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw wave
            ctx.strokeStyle = '#3B82F6';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let x = 0; x < width; x++) {
                const y = height/2 + 30 * Math.sin((x/50) * 2 * Math.PI - time);
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            // Draw direction arrow
            ctx.fillStyle = '#3B82F6';
            ctx.beginPath();
            ctx.moveTo(width - 20, height/2 - 5);
            ctx.lineTo(width - 5, height/2);
            ctx.lineTo(width - 20, height/2 + 5);
            ctx.fill();
        }

        function drawLongitudinalDemo() {
            const canvas = document.getElementById('longitudinalDemo');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw particles
            ctx.fillStyle = '#10B981';
            const particleCount = 20;
            
            for (let i = 0; i < particleCount; i++) {
                const baseX = (i / particleCount) * width;
                const displacement = 15 * Math.sin((i/5) * 2 * Math.PI - time);
                const x = baseX + displacement;
                
                ctx.beginPath();
                ctx.arc(x, height/2, 4, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            // Draw direction arrow
            ctx.fillStyle = '#10B981';
            ctx.beginPath();
            ctx.moveTo(width - 20, height/2 - 5);
            ctx.lineTo(width - 5, height/2);
            ctx.lineTo(width - 20, height/2 + 5);
            ctx.fill();
        }

        function drawLightWave() {
            const canvas = document.getElementById('lightWaveCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const wavelengthSlider = document.getElementById('lightWavelengthSlider');
            if (!wavelengthSlider) return;
            
            const wavelength = parseInt(wavelengthSlider.value);
            const [color] = wavelengthToColor(wavelength);
            const waveLength = (wavelength - 400) / 300 * 100 + 50; // Convert to canvas scale
            
            // Draw wave
            ctx.strokeStyle = color;
            ctx.lineWidth = 4;
            ctx.beginPath();
            
            for (let x = 0; x < width; x++) {
                const y = height/2 + 40 * Math.sin((x/waveLength) * 2 * Math.PI - time * 2);
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
        }

        function drawSoundWave() {
            const canvas = document.getElementById('soundWaveCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const hasMedium = document.getElementById('mediumToggle')?.checked ?? true;
            const frequencySlider = document.getElementById('soundFrequencySlider');
            if (!frequencySlider) return;
            
            const frequency = parseInt(frequencySlider.value);
            const waveLength = 1000 / frequency * 20; // Convert frequency to visual wavelength
            
            // Draw particles
            ctx.fillStyle = '#6366F1';
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const baseX = (i / particleCount) * width;
                let displacement = 0;
                
                if (hasMedium) {
                    displacement = 20 * Math.sin((baseX/waveLength) * 2 * Math.PI - time);
                }
                
                const x = baseX + displacement;
                
                ctx.beginPath();
                ctx.arc(x, height/2, 5, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            if (!hasMedium) {
                ctx.fillStyle = '#EF4444';
                ctx.font = '16px Inter';
                ctx.textAlign = 'center';
                ctx.fillText('No Medium - No Sound!', width/2, height/2 + 60);
            }
        }

        function drawComparisonWaves() {
            // Light comparison
            const lightCanvas = document.getElementById('comparisonLight');
            if (lightCanvas) {
                const ctx = lightCanvas.getContext('2d');
                const width = lightCanvas.width;
                const height = lightCanvas.height;
                
                ctx.clearRect(0, 0, width, height);
                
                ctx.strokeStyle = '#F59E0B';
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                for (let x = 0; x < width; x++) {
                    const y = height/2 + 30 * Math.sin((x/40) * 2 * Math.PI - time * 3);
                    if (x === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }
            
            // Sound comparison
            const soundCanvas = document.getElementById('comparisonSound');
            if (soundCanvas) {
                const ctx = soundCanvas.getContext('2d');
                const width = soundCanvas.width;
                const height = soundCanvas.height;
                
                ctx.clearRect(0, 0, width, height);
                
                ctx.fillStyle = '#3B82F6';
                const particleCount = 15;
                
                for (let i = 0; i < particleCount; i++) {
                    const baseX = (i / particleCount) * width;
                    const displacement = 15 * Math.sin((i/3) * 2 * Math.PI - time);
                    const x = baseX + displacement;
                    
                    ctx.beginPath();
                    ctx.arc(x, height/2, 5, 0, 2 * Math.PI);
                    ctx.fill();
                }
            }
        }

        function drawExplorationWaves() {
            // Light exploration
            const lightCanvas = document.getElementById('lightExploration');
            if (lightCanvas) {
                const ctx = lightCanvas.getContext('2d');
                const width = lightCanvas.width;
                const height = lightCanvas.height;
                
                ctx.clearRect(0, 0, width, height);
                
                const wavelengthSlider = document.getElementById('lightWavelength2');
                const amplitudeSlider = document.getElementById('lightAmplitude');
                const speedSlider = document.getElementById('lightSpeed');
                
                if (wavelengthSlider && amplitudeSlider && speedSlider) {
                    const wavelength = parseInt(wavelengthSlider.value);
                    const amplitude = parseInt(amplitudeSlider.value);
                    const speed = parseInt(speedSlider.value);
                    
                    const [color] = wavelengthToColor(wavelength);
                    const waveLength = (wavelength - 400) / 300 * 60 + 30;
                    
                    ctx.strokeStyle = color;
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    
                    for (let x = 0; x < width; x++) {
                        const y = height/2 + amplitude * Math.sin((x/waveLength) * 2 * Math.PI - time * speed/2);
                        if (x === 0) ctx.moveTo(x, y);
                        else ctx.lineTo(x, y);
                    }
                    ctx.stroke();
                }
            }
            
            // Sound exploration
            const soundCanvas = document.getElementById('soundExploration');
            if (soundCanvas) {
                const ctx = soundCanvas.getContext('2d');
                const width = soundCanvas.width;
                const height = soundCanvas.height;
                
                ctx.clearRect(0, 0, width, height);
                
                const frequencySlider = document.getElementById('soundFrequency2');
                const amplitudeSlider = document.getElementById('soundAmplitude');
                const speedSlider = document.getElementById('soundSpeed');
                const mediumToggle = document.getElementById('mediumToggle2');
                
                if (frequencySlider && amplitudeSlider && speedSlider && mediumToggle) {
                    const frequency = parseInt(frequencySlider.value);
                    const amplitude = parseInt(amplitudeSlider.value);
                    const speed = parseInt(speedSlider.value);
                    const hasMedium = mediumToggle.checked;
                    
                    if (hasMedium && speed > 0) {
                        const waveLength = 1000 / frequency * 15;
                        
                        ctx.fillStyle = '#3B82F6';
                        const particleCount = 20;
                        
                        for (let i = 0; i < particleCount; i++) {
                            const baseX = (i / particleCount) * width;
                            const displacement = amplitude * Math.sin((baseX/waveLength) * 2 * Math.PI - time * speed/2);
                            const x = baseX + displacement;
                            
                            ctx.beginPath();
                            ctx.arc(x, height/2, 4, 0, 2 * Math.PI);
                            ctx.fill();
                        }
                    } else {
                        ctx.fillStyle = '#EF4444';
                        ctx.font = '14px Inter';
                        ctx.textAlign = 'center';
                        ctx.fillText('No propagation without medium!', width/2, height/2);
                    }
                }
            }
        }

        function drawPracticeWave() {
            const canvas = document.getElementById('practiceCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const wavelengthSlider = document.getElementById('practiceWavelength');
            const speedSlider = document.getElementById('practiceSpeed');
            
            if (wavelengthSlider && speedSlider) {
                const wavelength = parseInt(wavelengthSlider.value);
                const speed = parseInt(speedSlider.value);
                
                const [color] = wavelengthToColor(wavelength);
                const waveLength = (wavelength - 400) / 300 * 80 + 40;
                
                ctx.strokeStyle = color;
                ctx.lineWidth = 4;
                ctx.beginPath();
                
                for (let x = 0; x < width; x++) {
                    const y = height/2 + 35 * Math.sin((x/waveLength) * 2 * Math.PI - time * speed/3);
                    if (x === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }
        }

        // Quiz functions
        function initQuiz() {
            currentQuizQuestion = 0;
            quizScore = 0;
            quizAnswered = new Array(quizQuestions.length).fill(false);
            displayQuizQuestion();
            updateQuizUI();
        }

        function displayQuizQuestion() {
            const question = quizQuestions[currentQuizQuestion];
            
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentQuestionNum').textContent = currentQuizQuestion + 1;
            document.getElementById('totalQuestions').textContent = quizQuestions.length;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.innerHTML = `
                    <div class="flex items-center">
                        <input type="radio" name="quizOption" value="${index}" id="option${index}" class="mr-3">
                        <label for="option${index}" class="cursor-pointer">${option}</label>
                    </div>
                `;
                optionsContainer.appendChild(optionDiv);
                
                optionDiv.addEventListener('click', () => {
                    document.getElementById(`option${index}`).checked = true;
                    document.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
                    optionDiv.classList.add('selected');
                });
            });
            
            // Hide feedback and reset buttons
            document.getElementById('feedbackContainer').classList.add('hidden');
            document.getElementById('submitQuizBtn').classList.remove('hidden');
            document.getElementById('nextQuizBtn').disabled = true;
        }

        function submitQuizAnswer() {
            const selectedOption = document.querySelector('input[name="quizOption"]:checked');
            if (!selectedOption) return;
            
            const question = quizQuestions[currentQuizQuestion];
            const selectedIndex = parseInt(selectedOption.value);
            const isCorrect = selectedIndex === question.correct;
            
            if (isCorrect) {
                quizScore++;
            }
            quizAnswered[currentQuizQuestion] = true;
            
            // Show feedback
            const feedbackContainer = document.getElementById('feedbackContainer');
            feedbackContainer.className = `mt-4 p-4 rounded-lg ${isCorrect ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200' : 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200'}`;
            feedbackContainer.innerHTML = `
                <div class="font-semibold mb-2">${isCorrect ? '✅ Correct!' : '❌ Incorrect'}</div>
                <p>${question.explanation}</p>
            `;
            feedbackContainer.classList.remove('hidden');
            
            // Update option colors
            document.querySelectorAll('.quiz-option').forEach((opt, index) => {
                if (index === question.correct) {
                    opt.classList.add('correct');
                } else if (index === selectedIndex && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });
            
            document.getElementById('submitQuizBtn').classList.add('hidden');
            document.getElementById('nextQuizBtn').disabled = false;
            
            updateQuizUI();
        }

        function nextQuizQuestion() {
            if (currentQuizQuestion < quizQuestions.length - 1) {
                currentQuizQuestion++;
                displayQuizQuestion();
            } else {
                showQuizResults();
            }
            updateQuizNavigation();
        }

        function prevQuizQuestion() {
            if (currentQuizQuestion > 0) {
                currentQuizQuestion--;
                displayQuizQuestion();
            }
            updateQuizNavigation();
        }

        function updateQuizNavigation() {
            document.getElementById('prevQuizBtn').disabled = currentQuizQuestion === 0;
            document.getElementById('nextQuizBtn').textContent = 
                currentQuizQuestion === quizQuestions.length - 1 ? 'Finish Quiz' : 'Next →';
        }

        function updateQuizUI() {
            document.getElementById('quizScore').textContent = quizScore;
            document.getElementById('maxScore').textContent = quizAnswered.filter(Boolean).length;
        }

        function showQuizResults() {
            document.getElementById('quizContainer').classList.add('hidden');
            document.getElementById('quizResults').classList.remove('hidden');
            
            document.getElementById('finalScore').textContent = `${quizScore}/${quizQuestions.length}`;
            
            let message;
            const percentage = (quizScore / quizQuestions.length) * 100;
            if (percentage >= 80) {
                message = "Excellent work! You really understand waves! 🌟";
            } else if (percentage >= 60) {
                message = "Good job! You're getting the hang of waves! 👍";
            } else {
                message = "Keep practicing! Waves take time to master! 💪";
            }
            document.getElementById('scoreMessage').textContent = message;
        }

        function restartQuiz() {
            document.getElementById('quizContainer').classList.remove('hidden');
            document.getElementById('quizResults').classList.add('hidden');
            initQuiz();
        }

        // Practice functions
        function initPractice() {
            updatePractice();
        }

        function updatePractice() {
            const wavelengthSlider = document.getElementById('practiceWavelength');
            const speedSlider = document.getElementById('practiceSpeed');
            
            if (!wavelengthSlider || !speedSlider) return;
            
            const wavelength = parseInt(wavelengthSlider.value);
            const speed = parseInt(speedSlider.value);
            const [color, colorName] = wavelengthToColor(wavelength);
            
            // Calculate frequency using wave equation: f = v / λ
            const frequency = (speed * 10) / (wavelength / 100); // Simplified calculation for demo
            
            // Update displays
            document.getElementById('displayWavelength').textContent = `${wavelength} nm`;
            document.getElementById('displaySpeed').textContent = `${speed} units`;
            document.getElementById('displayFrequency').textContent = `${frequency.toFixed(2)} Hz`;
            document.getElementById('displayColor').textContent = colorName;
            document.getElementById('yourFreq').textContent = `${frequency.toFixed(2)} Hz`;
            
            // Update progress bar
            const target = 1.2; // Target frequency
            const progress = Math.min((frequency / target) * 100, 100);
            document.getElementById('freqProgress').style.width = `${progress}%`;
        }

        function checkPracticeAnswer() {
            const wavelength = parseInt(document.getElementById('practiceWavelength').value);
            const frequency = parseFloat(document.getElementById('yourFreq').textContent);
            
            const targetWavelength = 500; // Cyan
            const targetFrequency = 1.2;
            
            const wavelengthClose = Math.abs(wavelength - targetWavelength) <= 20;
            const frequencyClose = Math.abs(frequency - targetFrequency) <= 0.2;
            
            const resultContainer = document.getElementById('practiceResult');
            
            if (wavelengthClose && frequencyClose) {
                resultContainer.className = 'mt-4 p-4 rounded-lg bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200';
                resultContainer.innerHTML = `
                    <div class="font-bold text-lg mb-2">🎉 Perfect!</div>
                    <p>You've successfully created a cyan light wave with the target frequency! You understand the wave equation!</p>
                `;
            } else {
                let feedback = "Not quite right. ";
                if (!wavelengthClose) feedback += "Try adjusting the wavelength to around 500nm for cyan. ";
                if (!frequencyClose) feedback += "Adjust the speed to get closer to 1.2 Hz frequency.";
                
                resultContainer.className = 'mt-4 p-4 rounded-lg bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200';
                resultContainer.innerHTML = `
                    <div class="font-bold mb-2">Keep trying!</div>
                    <p>${feedback}</p>
                `;
            }
            
            resultContainer.classList.remove('hidden');
        }

        function completeBasics() {
            completedSteps.add(6);
            updateProgress();
            showCustomAlert('Congratulations! 🎉', 
                'You\'ve completed the basic concepts! Now explore the other tabs to deepen your understanding.');
        }

        // Initialize the app when the page loads
        window.addEventListener('load', init);

        // Initialize default values
        updateLightColor();
        updateSoundFrequency();
    </script>
</body>
</html>
